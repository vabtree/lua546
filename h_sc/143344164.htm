<html>
<head>
<!-- This html document was created by Imagix 4D -->
<link href="../htm/symbol.css" rel="stylesheet" type="text/css">
<link href="../htm/symcolors.css" rel="stylesheet" type="text/css">
<link href="../htm/notebook.css" rel="stylesheet" type="text/css">
<base target="symbol">
</head>
<body>

<h2>lstrlib.c</h2>

<div class="notebook">
<ul>
<li><a href="../h_aa/143344164.htm" class="file" target="_self">Info</a></li>
<li><a href="../h_im/143344164.htm" class="file" target="_self">Global Interface</a></li>
<li><a href="../h_rx/143344164.htm" class="file" target="_self">File Inclusion</a></li>
<li><a href="../h_nm/143344164.htm" class="file" target="_self">Internals</a></li>
<li><a href="../h_uf/143344164.htm" class="file" target="_self">Use of Elements</a></li>
<li><a href="../h_df/143344164.htm" class="file" target="_self">Dependencies</a></li>
<li id="current"><a href="../h_src/143344164.htm" class="file" target="_self">Source Code</a></li>
</ul>
</div>
<div class="notebook">
<ul>
<li><a href="../h_src/143344164.htm" class="file" target="_self">Source Code</a></li>
<li id="current"><a href="../h_sc/143344164.htm" class="file" target="_self">Source Checks</a></li>
</ul>
</div>
<div class="nb_clear">
</div>
<h4>Source Checks  <a class="legend">(see key)</a></h4>
<table cellpadding=0 cellspacing=0 border=0>
<tr><td>total instances:</td><td class=mtrc>379</td></tr>
<tr><td>total checks involved:</td><td class=mtrc>10</td></tr>
<tr><td>total lines  involved:</td><td class=mtrc>370</td></tr>
<tr><th></th></tr>
</table>
<pre>
</pre>
<h5>Number of Built-In Operators</h5>
<pre>
   971 :    <a href="../h_src/57414060.htm" class="macro">luaL_addchar</a>(&amp;<a href="../h_src/143302276.htm" class="localvar">b</a>, *<a href="../h_src/143303500.htm" class="localvar">src</a>++);
  1284 :    <a href="../h_src/57414060.htm" class="macro">luaL_addchar</a>(&amp;<a href="../h_src/143290716.htm" class="localvar">b</a>, *<a href="../h_src/143291124.htm" class="localvar">strfrmt</a>++);
  1286 :    <a href="../h_src/57414060.htm" class="macro">luaL_addchar</a>(&amp;<a href="../h_src/143290716.htm" class="localvar">b</a>, *<a href="../h_src/143291124.htm" class="localvar">strfrmt</a>++);  <a  class="comments">/* %% */</a>
  1615 :    <a href="../h_src/57414060.htm" class="macro">luaL_addchar</a>(&amp;<a href="../h_src/143280176.htm" class="localvar">b</a>, <a href="../h_src/143289220.htm" class="macro">LUAL_PACKPADBYTE</a>);  <a  class="comments">/* fill alignment */</a>
  1666 :    <a href="../h_src/57414060.htm" class="macro">luaL_addchar</a>(&amp;<a href="../h_src/143280176.htm" class="localvar">b</a>, <a href="../h_src/143289220.htm" class="macro">LUAL_PACKPADBYTE</a>);
  1685 :    <a href="../h_src/57414060.htm" class="macro">luaL_addchar</a>(&amp;<a href="../h_src/143280176.htm" class="localvar">b</a>, '\0');  <a  class="comments">/* add zero at the end */</a>
  1689 :    case <a href="../h_src/143287248.htm" class="variable">Kpadding</a>: <a href="../h_src/57414060.htm" class="macro">luaL_addchar</a>(&amp;<a href="../h_src/143280176.htm" class="localvar">b</a>, <a href="../h_src/143289220.htm" class="macro">LUAL_PACKPADBYTE</a>);  <a  class="comments">/* FALLTHROUGH */</a>
</pre>
<pre>
</pre>
<h5>Unclear Subexpression</h5>
<pre>
   160 :    <a href="../h_aa/57441192.htm" class="type">size_t</a> <a href="../h_src/143336820.htm" class="localvar">totallen</a> = (<a href="../h_aa/57441192.htm" class="type">size_t</a>)<a href="../h_src/143337092.htm" class="localvar">n</a> * <a href="../h_src/143337500.htm" class="localvar">l</a> + (<a href="../h_aa/57441192.htm" class="type">size_t</a>)(<a href="../h_src/143337092.htm" class="localvar">n</a> - 1) * <a href="../h_src/143337364.htm" class="localvar">lsep</a>;
   160 :    <a href="../h_aa/57441192.htm" class="type">size_t</a> <a href="../h_src/143336820.htm" class="localvar">totallen</a> = (<a href="../h_aa/57441192.htm" class="type">size_t</a>)<a href="../h_src/143337092.htm" class="localvar">n</a> * <a href="../h_src/143337500.htm" class="localvar">l</a> + (<a href="../h_aa/57441192.htm" class="type">size_t</a>)(<a href="../h_src/143337092.htm" class="localvar">n</a> - 1) * <a href="../h_src/143337364.htm" class="localvar">lsep</a>;
   187 :    <a href="../h_src/143335460.htm" class="localvar">n</a> = (int)(<a href="../h_src/143335596.htm" class="localvar">pose</a> -  <a href="../h_src/143335732.htm" class="localvar">posi</a>) + 1;
   226 :    <a href="../h_src/57413652.htm" class="function">luaL_buffinit</a>(<a href="../h_src/143333828.htm" class="localvar">L</a>, &amp;<a href="../h_src/143333148.htm" class="localvar">state</a>-&gt;<a href="../h_src/143334032.htm" class="variable">B</a>);
   228 :    <a href="../h_src/57413516.htm" class="function">luaL_addlstring</a>(&amp;<a href="../h_src/143333148.htm" class="localvar">state</a>-&gt;<a href="../h_src/143334032.htm" class="variable">B</a>, (const char *)<a href="../h_src/143333692.htm" class="localvar">b</a>, <a href="../h_src/143333556.htm" class="localvar">size</a>);
   241 :    <a href="../h_src/57413312.htm" class="function">luaL_pushresult</a>(&amp;<a href="../h_src/143332740.htm" class="localvar">state</a>.<a href="../h_src/143334032.htm" class="variable">B</a>);
   404 :    switch (*<a href="../h_src/143325396.htm" class="localvar">p</a>++) {
   844 :    <a href="../h_src/143311524.htm" class="function">reprepstate</a>(&amp;<a href="../h_src/143308124.htm" class="localvar">gm</a>-&gt;<a href="../h_src/143308600.htm" class="variable">ms</a>);
   845 :    if ((<a href="../h_src/143307852.htm" class="localvar">e</a> = <a href="../h_src/143327232.htm" class="function">match</a>(&amp;<a href="../h_src/143308124.htm" class="localvar">gm</a>-&gt;<a href="../h_src/143308600.htm" class="variable">ms</a>, <a href="../h_src/143307988.htm" class="localvar">src</a>, <a href="../h_src/143308124.htm" class="localvar">gm</a>-&gt;<a href="../h_src/143308736.htm" class="variable">p</a>)) != NULL &amp;&amp; <a href="../h_src/143307852.htm" class="localvar">e</a> != <a href="../h_src/143308124.htm" class="localvar">gm</a>-&gt;<a href="../h_src/143308668.htm" class="variable">lastmatch</a>) {
   847 :    return <a href="../h_src/143313836.htm" class="function">push_captures</a>(&amp;<a href="../h_src/143308124.htm" class="localvar">gm</a>-&gt;<a href="../h_src/143308600.htm" class="variable">ms</a>, <a href="../h_src/143307988.htm" class="localvar">src</a>, <a href="../h_src/143307852.htm" class="localvar">e</a>);
   864 :    <a href="../h_src/143312476.htm" class="function">prepstate</a>(&amp;<a href="../h_src/143306764.htm" class="localvar">gm</a>-&gt;<a href="../h_src/143308600.htm" class="variable">ms</a>, <a href="../h_src/143307580.htm" class="localvar">L</a>, <a href="../h_src/143307172.htm" class="localvar">s</a>, <a href="../h_src/143307444.htm" class="localvar">ls</a>, <a href="../h_src/143307036.htm" class="localvar">p</a>, <a href="../h_src/143307308.htm" class="localvar">lp</a>);
   971 :    <a href="../h_src/57414060.htm" class="macro">luaL_addchar</a>(&amp;<a href="../h_src/143302276.htm" class="localvar">b</a>, *<a href="../h_src/143303500.htm" class="localvar">src</a>++);
  1028 :    else if (<a href="../h_src/143300372.htm" class="localvar">x</a> == 0) {  <a  class="comments">/* can be -0... */</a>
  1284 :    <a href="../h_src/57414060.htm" class="macro">luaL_addchar</a>(&amp;<a href="../h_src/143290716.htm" class="localvar">b</a>, *<a href="../h_src/143291124.htm" class="localvar">strfrmt</a>++);
  1286 :    <a href="../h_src/57414060.htm" class="macro">luaL_addchar</a>(&amp;<a href="../h_src/143290716.htm" class="localvar">b</a>, *<a href="../h_src/143291124.htm" class="localvar">strfrmt</a>++);  <a  class="comments">/* %% */</a>
  1295 :    switch (*<a href="../h_src/143291124.htm" class="localvar">strfrmt</a>++) {
  1456 :    } while (<a href="../h_src/143286840.htm" class="function">digit</a>(**<a href="../h_src/143286432.htm" class="localvar">fmt</a>) &amp;&amp; <a href="../h_src/143286160.htm" class="localvar">a</a> &lt;= ((int)<a href="../h_src/143343280.htm" class="macro">MAXSIZE</a> - 9)/10);
  1621 :    <a href="../h_src/57442076.htm" class="type">lua_Integer</a> <a href="../h_src/143438928.htm" class="localvar">lim</a> = (<a href="../h_src/57442076.htm" class="type">lua_Integer</a>)1 &lt;&lt; ((<a href="../h_src/143279496.htm" class="localvar">size</a> * <a href="../h_src/143288948.htm" class="macro">NB</a>) - 1);
  1673 :    <a href="../h_src/143437568.htm" class="localvar">len</a> &lt; ((<a href="../h_aa/57441192.htm" class="type">size_t</a>)1 &lt;&lt; (<a href="../h_src/143279496.htm" class="localvar">size</a> * <a href="../h_src/143288948.htm" class="macro">NB</a>)),
  1739 :    <a href="../h_src/57438132.htm" class="function">lua_Unsigned</a> <a href="../h_src/143434712.htm" class="localvar">mask</a> = (<a href="../h_src/57438132.htm" class="function">lua_Unsigned</a>)1 &lt;&lt; (<a href="../h_src/143435392.htm" class="localvar">size</a>*<a href="../h_src/143288948.htm" class="macro">NB</a> - 1);
  1766 :    <a href="../h_src/57417256.htm" class="macro">luaL_argcheck</a>(<a href="../h_src/143434304.htm" class="localvar">L</a>, (<a href="../h_aa/57441192.htm" class="type">size_t</a>)<a href="../h_src/143433216.htm" class="localvar">ntoalign</a> + <a href="../h_src/143433352.htm" class="localvar">size</a> &lt;= <a href="../h_src/143433896.htm" class="localvar">ld</a> - <a href="../h_src/143433624.htm" class="localvar">pos</a>, 2,
</pre>
<pre>
</pre>
<h5>Conversion Issue</h5>
<pre>
    58 :    <a href="../h_src/57435140.htm" class="function">lua_pushinteger</a>(<a href="../h_src/143343008.htm" class="localvar">L</a>, (<a href="../h_src/57442076.htm" class="type">lua_Integer</a>)<a href="../h_src/143342872.htm" class="localvar">l</a>);
    73 :    return (<a href="../h_aa/57441192.htm" class="type">size_t</a>)<a href="../h_src/143342600.htm" class="localvar">pos</a>;
    76 :    else if (<a href="../h_src/143342600.htm" class="localvar">pos</a> &lt; -(<a href="../h_src/57442076.htm" class="type">lua_Integer</a>)<a href="../h_src/143342464.htm" class="localvar">len</a>)  <a  class="comments">/* inverted comparison */</a>
    78 :    else return <a href="../h_src/143342464.htm" class="localvar">len</a> + (<a href="../h_aa/57441192.htm" class="type">size_t</a>)<a href="../h_src/143342600.htm" class="localvar">pos</a> + 1;
    90 :    if (<a href="../h_src/143341648.htm" class="localvar">pos</a> &gt; (<a href="../h_src/57442076.htm" class="type">lua_Integer</a>)<a href="../h_src/143341784.htm" class="localvar">len</a>)
    93 :    return (<a href="../h_aa/57441192.htm" class="type">size_t</a>)<a href="../h_src/143341648.htm" class="localvar">pos</a>;
    94 :    else if (<a href="../h_src/143341648.htm" class="localvar">pos</a> &lt; -(<a href="../h_src/57442076.htm" class="type">lua_Integer</a>)<a href="../h_src/143341784.htm" class="localvar">len</a>)
    96 :    else return <a href="../h_src/143341784.htm" class="localvar">len</a> + (<a href="../h_aa/57441192.htm" class="type">size_t</a>)<a href="../h_src/143341648.htm" class="localvar">pos</a> + 1;
   131 :    <a href="../h_src/143338928.htm" class="localvar">p</a>[<a href="../h_src/143339336.htm" class="localvar">i</a>] = <a href="../h_aa/143338792.htm" class="libfunc">tolower</a>(<a href="../h_src/143343552.htm" class="macro">uchar</a>(<a href="../h_src/143339064.htm" class="localvar">s</a>[<a href="../h_src/143339336.htm" class="localvar">i</a>]));
   131 :    <a href="../h_src/143338928.htm" class="localvar">p</a>[<a href="../h_src/143339336.htm" class="localvar">i</a>] = <a href="../h_aa/143338792.htm" class="libfunc">tolower</a>(<a href="../h_src/143343552.htm" class="macro">uchar</a>(<a href="../h_src/143339064.htm" class="localvar">s</a>[<a href="../h_src/143339336.htm" class="localvar">i</a>]));
   144 :    <a href="../h_src/143337908.htm" class="localvar">p</a>[<a href="../h_src/143338316.htm" class="localvar">i</a>] = <a href="../h_aa/58309704.htm" class="libfunc">toupper</a>(<a href="../h_src/143343552.htm" class="macro">uchar</a>(<a href="../h_src/143338044.htm" class="localvar">s</a>[<a href="../h_src/143338316.htm" class="localvar">i</a>]));
   144 :    <a href="../h_src/143337908.htm" class="localvar">p</a>[<a href="../h_src/143338316.htm" class="localvar">i</a>] = <a href="../h_aa/58309704.htm" class="libfunc">toupper</a>(<a href="../h_src/143343552.htm" class="macro">uchar</a>(<a href="../h_src/143338044.htm" class="localvar">s</a>[<a href="../h_src/143338316.htm" class="localvar">i</a>]));
   157 :    else if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>(<a href="../h_src/143337500.htm" class="localvar">l</a> + <a href="../h_src/143337364.htm" class="localvar">lsep</a> &lt; <a href="../h_src/143337500.htm" class="localvar">l</a> || <a href="../h_src/143337500.htm" class="localvar">l</a> + <a href="../h_src/143337364.htm" class="localvar">lsep</a> &gt; <a href="../h_src/143343280.htm" class="macro">MAXSIZE</a> / <a href="../h_src/143337092.htm" class="localvar">n</a>))
   160 :    <a href="../h_aa/57441192.htm" class="type">size_t</a> <a href="../h_src/143336820.htm" class="localvar">totallen</a> = (<a href="../h_aa/57441192.htm" class="type">size_t</a>)<a href="../h_src/143337092.htm" class="localvar">n</a> * <a href="../h_src/143337500.htm" class="localvar">l</a> + (<a href="../h_aa/57441192.htm" class="type">size_t</a>)(<a href="../h_src/143337092.htm" class="localvar">n</a> - 1) * <a href="../h_src/143337364.htm" class="localvar">lsep</a>;
   160 :    <a href="../h_aa/57441192.htm" class="type">size_t</a> <a href="../h_src/143336820.htm" class="localvar">totallen</a> = (<a href="../h_aa/57441192.htm" class="type">size_t</a>)<a href="../h_src/143337092.htm" class="localvar">n</a> * <a href="../h_src/143337500.htm" class="localvar">l</a> + (<a href="../h_aa/57441192.htm" class="type">size_t</a>)(<a href="../h_src/143337092.htm" class="localvar">n</a> - 1) * <a href="../h_src/143337364.htm" class="localvar">lsep</a>;
   187 :    <a href="../h_src/143335460.htm" class="localvar">n</a> = (int)(<a href="../h_src/143335596.htm" class="localvar">pose</a> -  <a href="../h_src/143335732.htm" class="localvar">posi</a>) + 1;
   190 :    <a href="../h_src/57435140.htm" class="function">lua_pushinteger</a>(<a href="../h_src/143336276.htm" class="localvar">L</a>, <a href="../h_src/143343552.htm" class="macro">uchar</a>(<a href="../h_src/143336004.htm" class="localvar">s</a>[<a href="../h_src/143335732.htm" class="localvar">posi</a>+<a href="../h_src/143335324.htm" class="localvar">i</a>-1]));
   201 :    <a href="../h_src/57438132.htm" class="function">lua_Unsigned</a> <a href="../h_src/143334372.htm" class="localvar">c</a> = (<a href="../h_src/57438132.htm" class="function">lua_Unsigned</a>)<a href="../h_src/57419976.htm" class="function">luaL_checkinteger</a>(<a href="../h_src/143335052.htm" class="localvar">L</a>, <a href="../h_src/143334780.htm" class="localvar">i</a>);
   202 :    <a href="../h_src/57417256.htm" class="macro">luaL_argcheck</a>(<a href="../h_src/143335052.htm" class="localvar">L</a>, <a href="../h_src/143334372.htm" class="localvar">c</a> &lt;= (<a href="../h_src/57438132.htm" class="function">lua_Unsigned</a>)UCHAR_MAX, <a href="../h_src/143334780.htm" class="localvar">i</a>, &quot;value out of range&quot;);
   203 :    <a href="../h_src/143334508.htm" class="localvar">p</a>[<a href="../h_src/143334780.htm" class="localvar">i</a> - 1] = <a href="../h_src/143343552.htm" class="macro">uchar</a>(<a href="../h_src/143334372.htm" class="localvar">c</a>);
   203 :    <a href="../h_src/143334508.htm" class="localvar">p</a>[<a href="../h_src/143334780.htm" class="localvar">i</a> - 1] = <a href="../h_src/143343552.htm" class="macro">uchar</a>(<a href="../h_src/143334372.htm" class="localvar">c</a>);
   330 :    static const <a href="../h_src/57420996.htm" class="type">luaL_Reg</a> <a href="../h_src/143328660.htm" class="variable">stringmetamethods</a>[] = {
   331 :    {&quot;__add&quot;, <a href="../h_src/143330836.htm" class="function">arith_add</a>},
   332 :    {&quot;__sub&quot;, <a href="../h_src/143330564.htm" class="function">arith_sub</a>},
   333 :    {&quot;__mul&quot;, <a href="../h_src/143330292.htm" class="function">arith_mul</a>},
   334 :    {&quot;__mod&quot;, <a href="../h_src/143330020.htm" class="function">arith_mod</a>},
   335 :    {&quot;__pow&quot;, <a href="../h_src/143329748.htm" class="function">arith_pow</a>},
   336 :    {&quot;__div&quot;, <a href="../h_src/143329476.htm" class="function">arith_div</a>},
   337 :    {&quot;__idiv&quot;, <a href="../h_src/143329204.htm" class="function">arith_idiv</a>},
   338 :    {&quot;__unm&quot;, <a href="../h_src/143328932.htm" class="function">arith_unm</a>},
   456 :    if (<a href="../h_src/143325260.htm" class="function">match_class</a>(<a href="../h_src/143324104.htm" class="localvar">c</a>, <a href="../h_src/143343552.htm" class="macro">uchar</a>(*<a href="../h_src/143323968.htm" class="localvar">p</a>)))
   461 :    if (<a href="../h_src/143343552.htm" class="macro">uchar</a>(*(<a href="../h_src/143323968.htm" class="localvar">p</a>-2)) &lt;= <a href="../h_src/143324104.htm" class="localvar">c</a> &amp;&amp; <a href="../h_src/143324104.htm" class="localvar">c</a> &lt;= <a href="../h_src/143343552.htm" class="macro">uchar</a>(*<a href="../h_src/143323968.htm" class="localvar">p</a>))
   461 :    if (<a href="../h_src/143343552.htm" class="macro">uchar</a>(*(<a href="../h_src/143323968.htm" class="localvar">p</a>-2)) &lt;= <a href="../h_src/143324104.htm" class="localvar">c</a> &amp;&amp; <a href="../h_src/143324104.htm" class="localvar">c</a> &lt;= <a href="../h_src/143343552.htm" class="macro">uchar</a>(*<a href="../h_src/143323968.htm" class="localvar">p</a>))
   464 :    else if (<a href="../h_src/143343552.htm" class="macro">uchar</a>(*<a href="../h_src/143323968.htm" class="localvar">p</a>) == <a href="../h_src/143324104.htm" class="localvar">c</a>) return <a href="../h_src/143323696.htm" class="localvar">sig</a>;
   475 :    int <a href="../h_src/143322880.htm" class="localvar">c</a> = <a href="../h_src/143343552.htm" class="macro">uchar</a>(*<a href="../h_src/143323288.htm" class="localvar">s</a>);
   478 :    case <a href="../h_src/143326756.htm" class="macro">L_ESC</a>: return <a href="../h_src/143325260.htm" class="function">match_class</a>(<a href="../h_src/143322880.htm" class="localvar">c</a>, <a href="../h_src/143343552.htm" class="macro">uchar</a>(*(<a href="../h_src/143323152.htm" class="localvar">p</a>+1)));
   480 :    default:  return (<a href="../h_src/143343552.htm" class="macro">uchar</a>(*<a href="../h_src/143323152.htm" class="localvar">p</a>) == <a href="../h_src/143322880.htm" class="localvar">c</a>);
   541 :    <a href="../h_src/143319888.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327844.htm" class="variable">level</a> = <a href="../h_src/143319208.htm" class="localvar">level</a>+1;
   562 :    <a href="../h_src/143317712.htm" class="localvar">len</a> = <a href="../h_src/143318120.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327368.htm" class="variable">capture</a>[<a href="../h_src/143317848.htm" class="localvar">l</a>].<a href="../h_src/143327640.htm" class="variable">len</a>;
   563 :    if ((<a href="../h_aa/57441192.htm" class="type">size_t</a>)(<a href="../h_src/143318120.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143328116.htm" class="variable">src_end</a>-<a href="../h_src/143317984.htm" class="localvar">s</a>) &gt;= <a href="../h_src/143317712.htm" class="localvar">len</a> &amp;&amp;
   608 :    <a href="../h_src/143317032.htm" class="localvar">previous</a> = (<a href="../h_src/143317440.htm" class="localvar">s</a> == <a href="../h_src/143317576.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143328184.htm" class="variable">src_init</a>) ? '\0' : *(<a href="../h_src/143317440.htm" class="localvar">s</a> - 1);
   609 :    if (!<a href="../h_src/143324240.htm" class="function">matchbracketclass</a>(<a href="../h_src/143343552.htm" class="macro">uchar</a>(<a href="../h_src/143317032.htm" class="localvar">previous</a>), <a href="../h_src/143317304.htm" class="localvar">p</a>, <a href="../h_src/143317168.htm" class="localvar">ep</a> - 1) &amp;&amp;
   610 :    <a href="../h_src/143324240.htm" class="function">matchbracketclass</a>(<a href="../h_src/143343552.htm" class="macro">uchar</a>(*<a href="../h_src/143317440.htm" class="localvar">s</a>), <a href="../h_src/143317304.htm" class="localvar">p</a>, <a href="../h_src/143317168.htm" class="localvar">ep</a> - 1)) {
   619 :    <a href="../h_src/143317440.htm" class="localvar">s</a> = <a href="../h_src/143318256.htm" class="function">match_capture</a>(<a href="../h_src/143317576.htm" class="localvar">ms</a>, <a href="../h_src/143317440.htm" class="localvar">s</a>, <a href="../h_src/143343552.htm" class="macro">uchar</a>(*(<a href="../h_src/143317304.htm" class="localvar">p</a> + 1)));
   681 :    while (<a href="../h_src/143316352.htm" class="localvar">l1</a> &gt; 0 &amp;&amp; (<a href="../h_src/143315944.htm" class="localvar">init</a> = (const char *)<a href="../h_aa/143315808.htm" class="libfunc">memchr</a>(<a href="../h_src/143316488.htm" class="localvar">s1</a>, *<a href="../h_src/143316216.htm" class="localvar">s2</a>, <a href="../h_src/143316352.htm" class="localvar">l1</a>)) != NULL) {
   877 :    while ((<a href="../h_src/143305540.htm" class="localvar">p</a> = (char *)<a href="../h_aa/143315808.htm" class="libfunc">memchr</a>(<a href="../h_src/143305676.htm" class="localvar">news</a>, <a href="../h_src/143326756.htm" class="macro">L_ESC</a>, <a href="../h_src/143305948.htm" class="localvar">l</a>)) != NULL) {
   884 :    else if (<a href="../h_aa/58309772.htm" class="libfunc">isdigit</a>(<a href="../h_src/143343552.htm" class="macro">uchar</a>(*<a href="../h_src/143305540.htm" class="localvar">p</a>))) {  <a  class="comments">/* '%n' */</a>
  1018 :    int <a href="../h_src/143300916.htm" class="localvar">d</a> = (int)<a href="../h_src/143301052.htm" class="localvar">dd</a>;
  1019 :    <a href="../h_src/143301460.htm" class="localvar">buff</a>[<a href="../h_src/143301324.htm" class="localvar">n</a>] = (<a href="../h_src/143300916.htm" class="localvar">d</a> &lt; 10 ? <a href="../h_src/143300916.htm" class="localvar">d</a> + '0' : <a href="../h_src/143300916.htm" class="localvar">d</a> - 10 + 'a');  <a  class="comments">/* add to buffer */</a>
  1026 :    if (<a href="../h_src/143300372.htm" class="localvar">x</a> != <a href="../h_src/143300372.htm" class="localvar">x</a> || <a href="../h_src/143300372.htm" class="localvar">x</a> == (<a href="../h_src/57442144.htm" class="type">lua_Number</a>)HUGE_VAL || <a href="../h_src/143300372.htm" class="localvar">x</a> == -(<a href="../h_src/57442144.htm" class="type">lua_Number</a>)HUGE_VAL)
  1026 :    if (<a href="../h_src/143300372.htm" class="localvar">x</a> != <a href="../h_src/143300372.htm" class="localvar">x</a> || <a href="../h_src/143300372.htm" class="localvar">x</a> == (<a href="../h_src/57442144.htm" class="type">lua_Number</a>)HUGE_VAL || <a href="../h_src/143300372.htm" class="localvar">x</a> == -(<a href="../h_src/57442144.htm" class="type">lua_Number</a>)HUGE_VAL)
  1044 :    <a href="../h_src/143300644.htm" class="localvar">buff</a>[<a href="../h_src/143299964.htm" class="localvar">n</a>++] = <a href="../h_src/57448468.htm" class="macro">lua_getlocaledecpoint</a>();  <a  class="comments">/* add radix point */</a>
  1062 :    <a href="../h_src/143299556.htm" class="localvar">buff</a>[<a href="../h_src/143298876.htm" class="localvar">i</a>] = <a href="../h_aa/58309704.htm" class="libfunc">toupper</a>(<a href="../h_src/143343552.htm" class="macro">uchar</a>(<a href="../h_src/143299556.htm" class="localvar">buff</a>[<a href="../h_src/143298876.htm" class="localvar">i</a>]));
  1062 :    <a href="../h_src/143299556.htm" class="localvar">buff</a>[<a href="../h_src/143298876.htm" class="localvar">i</a>] = <a href="../h_aa/58309704.htm" class="libfunc">toupper</a>(<a href="../h_src/143343552.htm" class="macro">uchar</a>(<a href="../h_src/143299556.htm" class="localvar">buff</a>[<a href="../h_src/143298876.htm" class="localvar">i</a>]));
  1123 :    <a href="../h_src/57414060.htm" class="macro">luaL_addchar</a>(<a href="../h_src/57415216.htm" class="variable">b</a>, '&quot;');
  1126 :    <a href="../h_src/57414060.htm" class="macro">luaL_addchar</a>(<a href="../h_src/57415216.htm" class="variable">b</a>, '\\');
  1129 :    else if (<a href="../h_aa/143324648.htm" class="libfunc">iscntrl</a>(<a href="../h_src/143343552.htm" class="macro">uchar</a>(*<a href="../h_src/143297244.htm" class="localvar">s</a>))) {
  1131 :    if (!<a href="../h_aa/58309772.htm" class="libfunc">isdigit</a>(<a href="../h_src/143343552.htm" class="macro">uchar</a>(*(<a href="../h_src/143297244.htm" class="localvar">s</a>+1))))
  1132 :    <a href="../h_src/57449692.htm" class="macro">l_sprintf</a>(<a href="../h_src/143296972.htm" class="localvar">buff</a>, sizeof(<a href="../h_src/143296972.htm" class="localvar">buff</a>), &quot;\\%d&quot;, (int)<a href="../h_src/143343552.htm" class="macro">uchar</a>(*<a href="../h_src/143297244.htm" class="localvar">s</a>));
  1132 :    <a href="../h_src/57449692.htm" class="macro">l_sprintf</a>(<a href="../h_src/143296972.htm" class="localvar">buff</a>, sizeof(<a href="../h_src/143296972.htm" class="localvar">buff</a>), &quot;\\%d&quot;, (int)<a href="../h_src/143343552.htm" class="macro">uchar</a>(*<a href="../h_src/143297244.htm" class="localvar">s</a>));
  1134 :    <a href="../h_src/57449692.htm" class="macro">l_sprintf</a>(<a href="../h_src/143296972.htm" class="localvar">buff</a>, sizeof(<a href="../h_src/143296972.htm" class="localvar">buff</a>), &quot;\\%03d&quot;, (int)<a href="../h_src/143343552.htm" class="macro">uchar</a>(*<a href="../h_src/143297244.htm" class="localvar">s</a>));
  1134 :    <a href="../h_src/57449692.htm" class="macro">l_sprintf</a>(<a href="../h_src/143296972.htm" class="localvar">buff</a>, sizeof(<a href="../h_src/143296972.htm" class="localvar">buff</a>), &quot;\\%03d&quot;, (int)<a href="../h_src/143343552.htm" class="macro">uchar</a>(*<a href="../h_src/143297244.htm" class="localvar">s</a>));
  1141 :    <a href="../h_src/57414060.htm" class="macro">luaL_addchar</a>(<a href="../h_src/57415216.htm" class="variable">b</a>, '&quot;');
  1153 :    if (<a href="../h_src/143296428.htm" class="localvar">n</a> == (<a href="../h_src/57442144.htm" class="type">lua_Number</a>)<a href="../h_src/57449420.htm" class="macro">HUGE_VAL</a>)  <a  class="comments">/* inf? */</a>
  1155 :    else if (<a href="../h_src/143296428.htm" class="localvar">n</a> == -(<a href="../h_src/57442144.htm" class="type">lua_Number</a>)<a href="../h_src/57449420.htm" class="macro">HUGE_VAL</a>)  <a  class="comments">/* -inf? */</a>
  1165 :    char *<a href="../h_src/143295884.htm" class="localvar">ppoint</a> = (char *)<a href="../h_aa/143315808.htm" class="libfunc">memchr</a>(<a href="../h_src/143296564.htm" class="localvar">buff</a>, <a href="../h_src/143296020.htm" class="localvar">point</a>, <a href="../h_src/143296156.htm" class="localvar">nb</a>);
  1193 :    <a href="../h_src/143294796.htm" class="localvar">nb</a> = <a href="../h_src/57449692.htm" class="macro">l_sprintf</a>(<a href="../h_src/143294932.htm" class="localvar">buff</a>, <a href="../h_src/143298604.htm" class="macro">MAX_ITEM</a>, <a href="../h_src/143294524.htm" class="localvar">format</a>, (<a href="../h_src/57450916.htm" class="macro">LUAI_UACINT</a>)<a href="../h_src/143294660.htm" class="localvar">n</a>);
  1211 :    if (<a href="../h_aa/58309772.htm" class="libfunc">isdigit</a>(<a href="../h_src/143343552.htm" class="macro">uchar</a>(*<a href="../h_src/143294252.htm" class="localvar">s</a>))) {
  1213 :    if (<a href="../h_aa/58309772.htm" class="libfunc">isdigit</a>(<a href="../h_src/143343552.htm" class="macro">uchar</a>(*<a href="../h_src/143294252.htm" class="localvar">s</a>))) <a href="../h_src/143294252.htm" class="localvar">s</a>++;  <a  class="comments">/* (2 digits at most) */</a>
  1236 :    if (!<a href="../h_aa/143324716.htm" class="libfunc">isalpha</a>(<a href="../h_src/143343552.htm" class="macro">uchar</a>(*<a href="../h_src/143293436.htm" class="localvar">spec</a>)))  <a  class="comments">/* did not go to the end? */</a>
  1313 :    <a href="../h_src/143290172.htm" class="localvar">nb</a> = <a href="../h_src/57449692.htm" class="macro">l_sprintf</a>(<a href="../h_src/143290308.htm" class="localvar">buff</a>, <a href="../h_src/143290444.htm" class="localvar">maxitem</a>, <a href="../h_src/143290580.htm" class="localvar">form</a>, (<a href="../h_src/57450916.htm" class="macro">LUAI_UACINT</a>)<a href="../h_src/143290036.htm" class="localvar">n</a>);
  1412 :    } <a href="../h_src/143288268.htm" class="variable">nativeendian</a> = {1};
  1456 :    } while (<a href="../h_src/143286840.htm" class="function">digit</a>(**<a href="../h_src/143286432.htm" class="localvar">fmt</a>) &amp;&amp; <a href="../h_src/143286160.htm" class="localvar">a</a> &lt;= ((int)<a href="../h_src/143343280.htm" class="macro">MAXSIZE</a> - 9)/10);
  1456 :    } while (<a href="../h_src/143286840.htm" class="function">digit</a>(**<a href="../h_src/143286432.htm" class="localvar">fmt</a>) &amp;&amp; <a href="../h_src/143286160.htm" class="localvar">a</a> &lt;= ((int)<a href="../h_src/143343280.htm" class="macro">MAXSIZE</a> - 9)/10);
  1480 :    <a href="../h_src/143285004.htm" class="localvar">h</a>-&gt;<a href="../h_src/143287996.htm" class="variable">islittle</a> = <a href="../h_src/143288268.htm" class="variable">nativeendian</a>.<a href="../h_src/143288404.htm" class="variable">little</a>;
  1520 :    case '=': <a href="../h_src/143284732.htm" class="localvar">h</a>-&gt;<a href="../h_src/143287996.htm" class="variable">islittle</a> = <a href="../h_src/143288268.htm" class="variable">nativeendian</a>.<a href="../h_src/143288404.htm" class="variable">little</a>; break;
  1556 :    *<a href="../h_src/143282624.htm" class="localvar">ntoalign</a> = (<a href="../h_src/143282352.htm" class="localvar">align</a> - (int)(<a href="../h_src/143283032.htm" class="localvar">totalsize</a> &amp; (<a href="../h_src/143282352.htm" class="localvar">align</a> - 1))) &amp; (<a href="../h_src/143282352.htm" class="localvar">align</a> - 1);
  1572 :    <a href="../h_src/143281400.htm" class="localvar">buff</a>[<a href="../h_src/143281808.htm" class="localvar">islittle</a> ? 0 : <a href="../h_src/143281672.htm" class="localvar">size</a> - 1] = (char)(<a href="../h_src/143281944.htm" class="localvar">n</a> &amp; <a href="../h_src/143288812.htm" class="macro">MC</a>);  <a  class="comments">/* first byte */</a>
  1574 :    <a href="../h_src/143281944.htm" class="localvar">n</a> &gt;&gt;= <a href="../h_src/143288948.htm" class="macro">NB</a>;
  1575 :    <a href="../h_src/143281400.htm" class="localvar">buff</a>[<a href="../h_src/143281808.htm" class="localvar">islittle</a> ? <a href="../h_src/143281264.htm" class="localvar">i</a> : <a href="../h_src/143281672.htm" class="localvar">size</a> - 1 - <a href="../h_src/143281264.htm" class="localvar">i</a>] = (char)(<a href="../h_src/143281944.htm" class="localvar">n</a> &amp; <a href="../h_src/143288812.htm" class="macro">MC</a>);
  1579 :    <a href="../h_src/143281400.htm" class="localvar">buff</a>[<a href="../h_src/143281808.htm" class="localvar">islittle</a> ? <a href="../h_src/143281264.htm" class="localvar">i</a> : <a href="../h_src/143281672.htm" class="localvar">size</a> - 1 - <a href="../h_src/143281264.htm" class="localvar">i</a>] = (char)<a href="../h_src/143288812.htm" class="macro">MC</a>;
  1615 :    <a href="../h_src/57414060.htm" class="macro">luaL_addchar</a>(&amp;<a href="../h_src/143280176.htm" class="localvar">b</a>, <a href="../h_src/143289220.htm" class="macro">LUAL_PACKPADBYTE</a>);  <a  class="comments">/* fill alignment */</a>
  1636 :    float <a href="../h_src/143438656.htm" class="localvar">f</a> = (float)<a href="../h_src/57420112.htm" class="function">luaL_checknumber</a>(<a href="../h_src/143280312.htm" class="localvar">L</a>, <a href="../h_src/143279768.htm" class="localvar">arg</a>);  <a  class="comments">/* get argument */</a>
  1639 :    <a href="../h_src/143281128.htm" class="function">copywithendian</a>(<a href="../h_src/143438520.htm" class="localvar">buff</a>, (char *)&amp;<a href="../h_src/143438656.htm" class="localvar">f</a>, sizeof(<a href="../h_src/143438656.htm" class="localvar">f</a>), <a href="../h_src/143280040.htm" class="localvar">h</a>.<a href="../h_src/143287996.htm" class="variable">islittle</a>);
  1647 :    <a href="../h_src/143281128.htm" class="function">copywithendian</a>(<a href="../h_src/143438248.htm" class="localvar">buff</a>, (char *)&amp;<a href="../h_src/143438384.htm" class="localvar">f</a>, sizeof(<a href="../h_src/143438384.htm" class="localvar">f</a>), <a href="../h_src/143280040.htm" class="localvar">h</a>.<a href="../h_src/143287996.htm" class="variable">islittle</a>);
  1655 :    <a href="../h_src/143281128.htm" class="function">copywithendian</a>(<a href="../h_src/143437976.htm" class="localvar">buff</a>, (char *)&amp;<a href="../h_src/143438112.htm" class="localvar">f</a>, sizeof(<a href="../h_src/143438112.htm" class="localvar">f</a>), <a href="../h_src/143280040.htm" class="localvar">h</a>.<a href="../h_src/143287996.htm" class="variable">islittle</a>);
  1662 :    <a href="../h_src/57417256.htm" class="macro">luaL_argcheck</a>(<a href="../h_src/143280312.htm" class="localvar">L</a>, <a href="../h_src/143437840.htm" class="localvar">len</a> &lt;= (<a href="../h_aa/57441192.htm" class="type">size_t</a>)<a href="../h_src/143279496.htm" class="localvar">size</a>, <a href="../h_src/143279768.htm" class="localvar">arg</a>,
  1665 :    while (<a href="../h_src/143437840.htm" class="localvar">len</a>++ &lt; (<a href="../h_aa/57441192.htm" class="type">size_t</a>)<a href="../h_src/143279496.htm" class="localvar">size</a>)  <a  class="comments">/* pad extra space */</a>
  1666 :    <a href="../h_src/57414060.htm" class="macro">luaL_addchar</a>(&amp;<a href="../h_src/143280176.htm" class="localvar">b</a>, <a href="../h_src/143289220.htm" class="macro">LUAL_PACKPADBYTE</a>);
  1685 :    <a href="../h_src/57414060.htm" class="macro">luaL_addchar</a>(&amp;<a href="../h_src/143280176.htm" class="localvar">b</a>, '\0');  <a  class="comments">/* add zero at the end */</a>
  1689 :    case <a href="../h_src/143287248.htm" class="variable">Kpadding</a>: <a href="../h_src/57414060.htm" class="macro">luaL_addchar</a>(&amp;<a href="../h_src/143280176.htm" class="localvar">b</a>, <a href="../h_src/143289220.htm" class="macro">LUAL_PACKPADBYTE</a>);  <a  class="comments">/* FALLTHROUGH */</a>
  1711 :    <a href="../h_src/57417256.htm" class="macro">luaL_argcheck</a>(<a href="../h_src/143436888.htm" class="localvar">L</a>, <a href="../h_src/143436480.htm" class="localvar">totalsize</a> &lt;= <a href="../h_src/143343280.htm" class="macro">MAXSIZE</a> - <a href="../h_src/143436344.htm" class="localvar">size</a>, 1,
  1715 :    <a href="../h_src/57435140.htm" class="function">lua_pushinteger</a>(<a href="../h_src/143436888.htm" class="localvar">L</a>, (<a href="../h_src/57442076.htm" class="type">lua_Integer</a>)<a href="../h_src/143436480.htm" class="localvar">totalsize</a>);
  1730 :    <a href="../h_src/57438132.htm" class="function">lua_Unsigned</a> <a href="../h_src/143435120.htm" class="localvar">res</a> = 0;
  1735 :    <a href="../h_src/143435120.htm" class="localvar">res</a> |= (<a href="../h_src/57438132.htm" class="function">lua_Unsigned</a>)(unsigned char)<a href="../h_src/143435664.htm" class="localvar">str</a>[<a href="../h_src/143435528.htm" class="localvar">islittle</a> ? <a href="../h_src/143434984.htm" class="localvar">i</a> : <a href="../h_src/143435392.htm" class="localvar">size</a> - 1 - <a href="../h_src/143434984.htm" class="localvar">i</a>];
  1735 :    <a href="../h_src/143435120.htm" class="localvar">res</a> |= (<a href="../h_src/57438132.htm" class="function">lua_Unsigned</a>)(unsigned char)<a href="../h_src/143435664.htm" class="localvar">str</a>[<a href="../h_src/143435528.htm" class="localvar">islittle</a> ? <a href="../h_src/143434984.htm" class="localvar">i</a> : <a href="../h_src/143435392.htm" class="localvar">size</a> - 1 - <a href="../h_src/143434984.htm" class="localvar">i</a>];
  1739 :    <a href="../h_src/57438132.htm" class="function">lua_Unsigned</a> <a href="../h_src/143434712.htm" class="localvar">mask</a> = (<a href="../h_src/57438132.htm" class="function">lua_Unsigned</a>)1 &lt;&lt; (<a href="../h_src/143435392.htm" class="localvar">size</a>*<a href="../h_src/143288948.htm" class="macro">NB</a> - 1);
  1740 :    <a href="../h_src/143435120.htm" class="localvar">res</a> = ((<a href="../h_src/143435120.htm" class="localvar">res</a> ^ <a href="../h_src/143434712.htm" class="localvar">mask</a>) - <a href="../h_src/143434712.htm" class="localvar">mask</a>);  <a  class="comments">/* do sign extension */</a>
  1744 :    int <a href="../h_src/143434576.htm" class="localvar">mask</a> = (!<a href="../h_src/143435256.htm" class="localvar">issigned</a> || (<a href="../h_src/57442076.htm" class="type">lua_Integer</a>)<a href="../h_src/143435120.htm" class="localvar">res</a> &gt;= 0) ? 0 : <a href="../h_src/143288812.htm" class="macro">MC</a>;
  1746 :    if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>((unsigned char)<a href="../h_src/143435664.htm" class="localvar">str</a>[<a href="../h_src/143435528.htm" class="localvar">islittle</a> ? <a href="../h_src/143434984.htm" class="localvar">i</a> : <a href="../h_src/143435392.htm" class="localvar">size</a> - 1 - <a href="../h_src/143434984.htm" class="localvar">i</a>] != <a href="../h_src/143434576.htm" class="localvar">mask</a>))
  1750 :    return (<a href="../h_src/57442076.htm" class="type">lua_Integer</a>)<a href="../h_src/143435120.htm" class="localvar">res</a>;
  1766 :    <a href="../h_src/57417256.htm" class="macro">luaL_argcheck</a>(<a href="../h_src/143434304.htm" class="localvar">L</a>, (<a href="../h_aa/57441192.htm" class="type">size_t</a>)<a href="../h_src/143433216.htm" class="localvar">ntoalign</a> + <a href="../h_src/143433352.htm" class="localvar">size</a> &lt;= <a href="../h_src/143433896.htm" class="localvar">ld</a> - <a href="../h_src/143433624.htm" class="localvar">pos</a>, 2,
  1782 :    <a href="../h_src/143281128.htm" class="function">copywithendian</a>((char *)&amp;<a href="../h_src/143432808.htm" class="localvar">f</a>, <a href="../h_src/143433760.htm" class="localvar">data</a> + <a href="../h_src/143433624.htm" class="localvar">pos</a>, sizeof(<a href="../h_src/143432808.htm" class="localvar">f</a>), <a href="../h_src/143434168.htm" class="localvar">h</a>.<a href="../h_src/143287996.htm" class="variable">islittle</a>);
  1788 :    <a href="../h_src/143281128.htm" class="function">copywithendian</a>((char *)&amp;<a href="../h_src/143432672.htm" class="localvar">f</a>, <a href="../h_src/143433760.htm" class="localvar">data</a> + <a href="../h_src/143433624.htm" class="localvar">pos</a>, sizeof(<a href="../h_src/143432672.htm" class="localvar">f</a>), <a href="../h_src/143434168.htm" class="localvar">h</a>.<a href="../h_src/143287996.htm" class="variable">islittle</a>);
  1794 :    <a href="../h_src/143281128.htm" class="function">copywithendian</a>((char *)&amp;<a href="../h_src/143432536.htm" class="localvar">f</a>, <a href="../h_src/143433760.htm" class="localvar">data</a> + <a href="../h_src/143433624.htm" class="localvar">pos</a>, sizeof(<a href="../h_src/143432536.htm" class="localvar">f</a>), <a href="../h_src/143434168.htm" class="localvar">h</a>.<a href="../h_src/143287996.htm" class="variable">islittle</a>);
  1803 :    <a href="../h_aa/57441192.htm" class="type">size_t</a> <a href="../h_src/143432400.htm" class="localvar">len</a> = (<a href="../h_aa/57441192.htm" class="type">size_t</a>)<a href="../h_src/143435936.htm" class="function">unpackint</a>(<a href="../h_src/143434304.htm" class="localvar">L</a>, <a href="../h_src/143433760.htm" class="localvar">data</a> + <a href="../h_src/143433624.htm" class="localvar">pos</a>, <a href="../h_src/143434168.htm" class="localvar">h</a>.<a href="../h_src/143287996.htm" class="variable">islittle</a>, <a href="../h_src/143433352.htm" class="localvar">size</a>, 0);
  1830 :    static const <a href="../h_src/57420996.htm" class="type">luaL_Reg</a> <a href="../h_src/143432128.htm" class="variable">strlib</a>[] = {
  1831 :    {&quot;byte&quot;, <a href="../h_src/143336412.htm" class="function">str_byte</a>},
  1832 :    {&quot;char&quot;, <a href="../h_src/143335188.htm" class="function">str_char</a>},
  1833 :    {&quot;dump&quot;, <a href="../h_src/143333012.htm" class="function">str_dump</a>},
  1834 :    {&quot;find&quot;, <a href="../h_src/143309484.htm" class="function">str_find</a>},
  1835 :    {&quot;format&quot;, <a href="../h_src/143291804.htm" class="function">str_format</a>},
  1836 :    {&quot;gmatch&quot;, <a href="../h_src/143307716.htm" class="function">gmatch</a>},
  1837 :    {&quot;gsub&quot;, <a href="../h_src/143304044.htm" class="function">str_gsub</a>},
  1838 :    {&quot;len&quot;, <a href="../h_src/143343144.htm" class="function">str_len</a>},
  1839 :    {&quot;lower&quot;, <a href="../h_src/143339744.htm" class="function">str_lower</a>},
  1840 :    {&quot;match&quot;, <a href="../h_src/143309212.htm" class="function">str_match</a>},
  1841 :    {&quot;rep&quot;, <a href="../h_src/143337772.htm" class="function">str_rep</a>},
  1842 :    {&quot;reverse&quot;, <a href="../h_src/143340696.htm" class="function">str_reverse</a>},
  1843 :    {&quot;sub&quot;, <a href="../h_src/143341512.htm" class="function">str_sub</a>},
  1844 :    {&quot;upper&quot;, <a href="../h_src/143338724.htm" class="function">str_upper</a>},
  1845 :    {&quot;pack&quot;, <a href="../h_src/143280448.htm" class="function">str_pack</a>},
  1846 :    {&quot;packsize&quot;, <a href="../h_src/143437024.htm" class="function">str_packsize</a>},
  1847 :    {&quot;unpack&quot;, <a href="../h_src/143434440.htm" class="function">str_unpack</a>},
</pre>
<pre>
</pre>
<h5>Needs Compound Statement</h5>
<pre>
    72 :    if (<a href="../h_src/143342600.htm" class="localvar">pos</a> &gt; 0)
    73 :    return (<a href="../h_aa/57441192.htm" class="type">size_t</a>)<a href="../h_src/143342600.htm" class="localvar">pos</a>;
    74 :    else if (<a href="../h_src/143342600.htm" class="localvar">pos</a> == 0)
    75 :    return 1;
    76 :    else if (<a href="../h_src/143342600.htm" class="localvar">pos</a> &lt; -(<a href="../h_src/57442076.htm" class="type">lua_Integer</a>)<a href="../h_src/143342464.htm" class="localvar">len</a>)  <a  class="comments">/* inverted comparison */</a>
    77 :    return 1;  <a  class="comments">/* clip to 1 */</a>
    78 :    else return <a href="../h_src/143342464.htm" class="localvar">len</a> + (<a href="../h_aa/57441192.htm" class="type">size_t</a>)<a href="../h_src/143342600.htm" class="localvar">pos</a> + 1;
    90 :    if (<a href="../h_src/143341648.htm" class="localvar">pos</a> &gt; (<a href="../h_src/57442076.htm" class="type">lua_Integer</a>)<a href="../h_src/143341784.htm" class="localvar">len</a>)
    91 :    return <a href="../h_src/143341784.htm" class="localvar">len</a>;
    92 :    else if (<a href="../h_src/143341648.htm" class="localvar">pos</a> &gt;= 0)
    93 :    return (<a href="../h_aa/57441192.htm" class="type">size_t</a>)<a href="../h_src/143341648.htm" class="localvar">pos</a>;
    94 :    else if (<a href="../h_src/143341648.htm" class="localvar">pos</a> &lt; -(<a href="../h_src/57442076.htm" class="type">lua_Integer</a>)<a href="../h_src/143341784.htm" class="localvar">len</a>)
    95 :    return 0;
    96 :    else return <a href="../h_src/143341784.htm" class="localvar">len</a> + (<a href="../h_aa/57441192.htm" class="type">size_t</a>)<a href="../h_src/143341648.htm" class="localvar">pos</a> + 1;
   105 :    if (<a href="../h_src/143340968.htm" class="localvar">start</a> &lt;= <a href="../h_src/143340832.htm" class="localvar">end</a>)
   106 :    <a href="../h_src/57435072.htm" class="function">lua_pushlstring</a>(<a href="../h_src/143341376.htm" class="localvar">L</a>, <a href="../h_src/143341104.htm" class="localvar">s</a> + <a href="../h_src/143340968.htm" class="localvar">start</a> - 1, (<a href="../h_src/143340832.htm" class="localvar">end</a> - <a href="../h_src/143340968.htm" class="localvar">start</a>) + 1);
   107 :    else <a href="../h_src/57427660.htm" class="macro">lua_pushliteral</a>(<a href="../h_src/143341376.htm" class="localvar">L</a>, &quot;&quot;);
   117 :    for (<a href="../h_src/143340288.htm" class="localvar">i</a> = 0; <a href="../h_src/143340288.htm" class="localvar">i</a> &lt; <a href="../h_src/143340424.htm" class="localvar">l</a>; <a href="../h_src/143340288.htm" class="localvar">i</a>++)
   118 :    <a href="../h_src/143339880.htm" class="localvar">p</a>[<a href="../h_src/143340288.htm" class="localvar">i</a>] = <a href="../h_src/143340016.htm" class="localvar">s</a>[<a href="../h_src/143340424.htm" class="localvar">l</a> - <a href="../h_src/143340288.htm" class="localvar">i</a> - 1];
   130 :    for (<a href="../h_src/143339336.htm" class="localvar">i</a>=0; <a href="../h_src/143339336.htm" class="localvar">i</a>&lt;<a href="../h_src/143339472.htm" class="localvar">l</a>; <a href="../h_src/143339336.htm" class="localvar">i</a>++)
   131 :    <a href="../h_src/143338928.htm" class="localvar">p</a>[<a href="../h_src/143339336.htm" class="localvar">i</a>] = <a href="../h_aa/143338792.htm" class="libfunc">tolower</a>(<a href="../h_src/143343552.htm" class="macro">uchar</a>(<a href="../h_src/143339064.htm" class="localvar">s</a>[<a href="../h_src/143339336.htm" class="localvar">i</a>]));
   143 :    for (<a href="../h_src/143338316.htm" class="localvar">i</a>=0; <a href="../h_src/143338316.htm" class="localvar">i</a>&lt;<a href="../h_src/143338452.htm" class="localvar">l</a>; <a href="../h_src/143338316.htm" class="localvar">i</a>++)
   144 :    <a href="../h_src/143337908.htm" class="localvar">p</a>[<a href="../h_src/143338316.htm" class="localvar">i</a>] = <a href="../h_aa/58309704.htm" class="libfunc">toupper</a>(<a href="../h_src/143343552.htm" class="macro">uchar</a>(<a href="../h_src/143338044.htm" class="localvar">s</a>[<a href="../h_src/143338316.htm" class="localvar">i</a>]));
   155 :    if (<a href="../h_src/143337092.htm" class="localvar">n</a> &lt;= 0)
   156 :    <a href="../h_src/57427660.htm" class="macro">lua_pushliteral</a>(<a href="../h_src/143337636.htm" class="localvar">L</a>, &quot;&quot;);
   157 :    else if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>(<a href="../h_src/143337500.htm" class="localvar">l</a> + <a href="../h_src/143337364.htm" class="localvar">lsep</a> &lt; <a href="../h_src/143337500.htm" class="localvar">l</a> || <a href="../h_src/143337500.htm" class="localvar">l</a> + <a href="../h_src/143337364.htm" class="localvar">lsep</a> &gt; <a href="../h_src/143343280.htm" class="macro">MAXSIZE</a> / <a href="../h_src/143337092.htm" class="localvar">n</a>))
   158 :    return <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143337636.htm" class="localvar">L</a>, &quot;resulting string too large&quot;);
   184 :    if (<a href="../h_src/143335732.htm" class="localvar">posi</a> &gt; <a href="../h_src/143335596.htm" class="localvar">pose</a>) return 0;  <a  class="comments">/* empty interval; return no values */</a>
   185 :    if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>(<a href="../h_src/143335596.htm" class="localvar">pose</a> - <a href="../h_src/143335732.htm" class="localvar">posi</a> &gt;= (<a href="../h_aa/57441192.htm" class="type">size_t</a>)INT_MAX))  <a  class="comments">/* arithmetic overflow? */</a>
   186 :    return <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143336276.htm" class="localvar">L</a>, &quot;string slice too long&quot;);
   189 :    for (<a href="../h_src/143335324.htm" class="localvar">i</a>=0; <a href="../h_src/143335324.htm" class="localvar">i</a>&lt;<a href="../h_src/143335460.htm" class="localvar">n</a>; <a href="../h_src/143335324.htm" class="localvar">i</a>++)
   190 :    <a href="../h_src/57435140.htm" class="function">lua_pushinteger</a>(<a href="../h_src/143336276.htm" class="localvar">L</a>, <a href="../h_src/143343552.htm" class="macro">uchar</a>(<a href="../h_src/143336004.htm" class="localvar">s</a>[<a href="../h_src/143335732.htm" class="localvar">posi</a>+<a href="../h_src/143335324.htm" class="localvar">i</a>-1]));
   239 :    if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>(<a href="../h_src/57432556.htm" class="function">lua_dump</a>(<a href="../h_src/143332876.htm" class="localvar">L</a>, <a href="../h_src/143333964.htm" class="function">writer</a>, &amp;<a href="../h_src/143332740.htm" class="localvar">state</a>, <a href="../h_src/143332604.htm" class="localvar">strip</a>) != 0))
   240 :    return <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143332876.htm" class="localvar">L</a>, &quot;unable to dump given function&quot;);
   280 :    !<a href="../h_src/57420588.htm" class="function">luaL_getmetafield</a>(<a href="../h_src/143331652.htm" class="localvar">L</a>, 2, <a href="../h_src/143331516.htm" class="localvar">mtname</a>)))
   281 :    <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143331652.htm" class="localvar">L</a>, &quot;attempt to %s a '%s' with a '%s'&quot;, <a href="../h_src/143331516.htm" class="localvar">mtname</a> + 2,
   282 :    <a href="../h_src/57416712.htm" class="macro">luaL_typename</a>(<a href="../h_src/143331652.htm" class="localvar">L</a>, -2), <a href="../h_src/57416712.htm" class="macro">luaL_typename</a>(<a href="../h_src/143331652.htm" class="localvar">L</a>, -1));
   289 :    if (<a href="../h_src/143332468.htm" class="function">tonum</a>(<a href="../h_src/143331244.htm" class="localvar">L</a>, 1) &amp;&amp; <a href="../h_src/143332468.htm" class="function">tonum</a>(<a href="../h_src/143331244.htm" class="localvar">L</a>, 2))
   290 :    <a href="../h_src/57435888.htm" class="function">lua_arith</a>(<a href="../h_src/143331244.htm" class="localvar">L</a>, <a href="../h_src/143331108.htm" class="localvar">op</a>);  <a  class="comments">/* result will be on the top */</a>
   291 :    else
   292 :    <a href="../h_src/143331788.htm" class="function">trymt</a>(<a href="../h_src/143331244.htm" class="localvar">L</a>, <a href="../h_src/143330972.htm" class="localvar">mtname</a>);
   389 :    <a href="../h_src/143326348.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327368.htm" class="variable">capture</a>[<a href="../h_src/143326212.htm" class="localvar">l</a>].<a href="../h_src/143327640.htm" class="variable">len</a> == <a href="../h_src/143328592.htm" class="macro">CAP_UNFINISHED</a>))
   390 :    return <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143326348.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327980.htm" class="variable">L</a>, &quot;invalid capture index %%%d&quot;, <a href="../h_src/143326212.htm" class="localvar">l</a> + 1);
   398 :    if (<a href="../h_src/143325940.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327368.htm" class="variable">capture</a>[<a href="../h_src/143325804.htm" class="localvar">level</a>].<a href="../h_src/143327640.htm" class="variable">len</a> == <a href="../h_src/143328592.htm" class="macro">CAP_UNFINISHED</a>) return <a href="../h_src/143325804.htm" class="localvar">level</a>;
   397 :    for (<a href="../h_src/143325804.htm" class="localvar">level</a>--; <a href="../h_src/143325804.htm" class="localvar">level</a>&gt;=0; <a href="../h_src/143325804.htm" class="localvar">level</a>--)
   398 :    if (<a href="../h_src/143325940.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327368.htm" class="variable">capture</a>[<a href="../h_src/143325804.htm" class="localvar">level</a>].<a href="../h_src/143327640.htm" class="variable">len</a> == <a href="../h_src/143328592.htm" class="macro">CAP_UNFINISHED</a>) return <a href="../h_src/143325804.htm" class="localvar">level</a>;
   399 :    return <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143325940.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327980.htm" class="variable">L</a>, &quot;invalid pattern capture&quot;);
   406 :    if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>(<a href="../h_src/143325396.htm" class="localvar">p</a> == <a href="../h_src/143325532.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143328048.htm" class="variable">p_end</a>))
   407 :    <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143325532.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327980.htm" class="variable">L</a>, &quot;malformed pattern (ends with '%%')&quot;);
   411 :    if (*<a href="../h_src/143325396.htm" class="localvar">p</a> == '^') <a href="../h_src/143325396.htm" class="localvar">p</a>++;
   413 :    if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>(<a href="../h_src/143325396.htm" class="localvar">p</a> == <a href="../h_src/143325532.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143328048.htm" class="variable">p_end</a>))
   414 :    <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143325532.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327980.htm" class="variable">L</a>, &quot;malformed pattern (missing ']')&quot;);
   415 :    if (*(<a href="../h_src/143325396.htm" class="localvar">p</a>++) == <a href="../h_src/143326756.htm" class="macro">L_ESC</a> &amp;&amp; <a href="../h_src/143325396.htm" class="localvar">p</a> &lt; <a href="../h_src/143325532.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143328048.htm" class="variable">p_end</a>)
   416 :    <a href="../h_src/143325396.htm" class="localvar">p</a>++;  <a  class="comments">/* skip escapes (e.g. '%]') */</a>
   456 :    if (<a href="../h_src/143325260.htm" class="function">match_class</a>(<a href="../h_src/143324104.htm" class="localvar">c</a>, <a href="../h_src/143343552.htm" class="macro">uchar</a>(*<a href="../h_src/143323968.htm" class="localvar">p</a>)))
   457 :    return <a href="../h_src/143323696.htm" class="localvar">sig</a>;
   461 :    if (<a href="../h_src/143343552.htm" class="macro">uchar</a>(*(<a href="../h_src/143323968.htm" class="localvar">p</a>-2)) &lt;= <a href="../h_src/143324104.htm" class="localvar">c</a> &amp;&amp; <a href="../h_src/143324104.htm" class="localvar">c</a> &lt;= <a href="../h_src/143343552.htm" class="macro">uchar</a>(*<a href="../h_src/143323968.htm" class="localvar">p</a>))
   462 :    return <a href="../h_src/143323696.htm" class="localvar">sig</a>;
   464 :    else if (<a href="../h_src/143343552.htm" class="macro">uchar</a>(*<a href="../h_src/143323968.htm" class="localvar">p</a>) == <a href="../h_src/143324104.htm" class="localvar">c</a>) return <a href="../h_src/143323696.htm" class="localvar">sig</a>;
   472 :    if (<a href="../h_src/143323288.htm" class="localvar">s</a> &gt;= <a href="../h_src/143323424.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143328116.htm" class="variable">src_end</a>)
   473 :    return 0;
   488 :    if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>(<a href="../h_src/143322336.htm" class="localvar">p</a> &gt;= <a href="../h_src/143322608.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143328048.htm" class="variable">p_end</a> - 1))
   489 :    <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143322608.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327980.htm" class="variable">L</a>, &quot;malformed pattern (missing arguments to '%%b')&quot;);
   490 :    if (*<a href="../h_src/143322472.htm" class="localvar">s</a> != *<a href="../h_src/143322336.htm" class="localvar">p</a>) return NULL;
   497 :    if (--<a href="../h_src/143321928.htm" class="localvar">cont</a> == 0) return <a href="../h_src/143322472.htm" class="localvar">s</a>+1;
   499 :    else if (*<a href="../h_src/143322472.htm" class="localvar">s</a> == <a href="../h_src/143322200.htm" class="localvar">b</a>) <a href="../h_src/143321928.htm" class="localvar">cont</a>++;
   509 :    while (<a href="../h_src/143323560.htm" class="function">singlematch</a>(<a href="../h_src/143321656.htm" class="localvar">ms</a>, <a href="../h_src/143321520.htm" class="localvar">s</a> + <a href="../h_src/143321112.htm" class="localvar">i</a>, <a href="../h_src/143321384.htm" class="localvar">p</a>, <a href="../h_src/143321248.htm" class="localvar">ep</a>))
   510 :    <a href="../h_src/143321112.htm" class="localvar">i</a>++;
   514 :    if (<a href="../h_src/143320976.htm" class="localvar">res</a>) return <a href="../h_src/143320976.htm" class="localvar">res</a>;
   525 :    if (<a href="../h_src/143320160.htm" class="localvar">res</a> != NULL)
   526 :    return <a href="../h_src/143320160.htm" class="localvar">res</a>;
   527 :    else if (<a href="../h_src/143323560.htm" class="function">singlematch</a>(<a href="../h_src/143320704.htm" class="localvar">ms</a>, <a href="../h_src/143320568.htm" class="localvar">s</a>, <a href="../h_src/143320432.htm" class="localvar">p</a>, <a href="../h_src/143320296.htm" class="localvar">ep</a>))
   528 :    <a href="../h_src/143320568.htm" class="localvar">s</a>++;  <a  class="comments">/* try with one more repetition */</a>
   529 :    else return NULL;
   538 :    if (<a href="../h_src/143319208.htm" class="localvar">level</a> &gt;= <a href="../h_src/143343688.htm" class="macro">LUA_MAXCAPTURES</a>) <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143319888.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327980.htm" class="variable">L</a>, &quot;too many captures&quot;);
   542 :    if ((<a href="../h_src/143319344.htm" class="localvar">res</a>=<a href="../h_src/143327232.htm" class="function">match</a>(<a href="../h_src/143319888.htm" class="localvar">ms</a>, <a href="../h_src/143319752.htm" class="localvar">s</a>, <a href="../h_src/143319616.htm" class="localvar">p</a>)) == NULL)  <a  class="comments">/* match failed? */</a>
   543 :    <a href="../h_src/143319888.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327844.htm" class="variable">level</a>--;  <a  class="comments">/* undo capture */</a>
   553 :    if ((<a href="../h_src/143318392.htm" class="localvar">res</a> = <a href="../h_src/143327232.htm" class="function">match</a>(<a href="../h_src/143318936.htm" class="localvar">ms</a>, <a href="../h_src/143318800.htm" class="localvar">s</a>, <a href="../h_src/143318664.htm" class="localvar">p</a>)) == NULL)  <a  class="comments">/* match failed? */</a>
   554 :    <a href="../h_src/143318936.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327368.htm" class="variable">capture</a>[<a href="../h_src/143318528.htm" class="localvar">l</a>].<a href="../h_src/143327640.htm" class="variable">len</a> = <a href="../h_src/143328592.htm" class="macro">CAP_UNFINISHED</a>;  <a  class="comments">/* undo capture */</a>
   564 :    <a href="../h_aa/58131444.htm" class="libfunc">memcmp</a>(<a href="../h_src/143318120.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327368.htm" class="variable">capture</a>[<a href="../h_src/143317848.htm" class="localvar">l</a>].<a href="../h_src/143327708.htm" class="variable">init</a>, <a href="../h_src/143317984.htm" class="localvar">s</a>, <a href="../h_src/143317712.htm" class="localvar">len</a>) == 0)
   565 :    return <a href="../h_src/143317984.htm" class="localvar">s</a>+<a href="../h_src/143317712.htm" class="localvar">len</a>;
   566 :    else return NULL;
   571 :    if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>(<a href="../h_src/143317576.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327912.htm" class="variable">matchdepth</a>-- == 0))
   572 :    <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143317576.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327980.htm" class="variable">L</a>, &quot;pattern too complex&quot;);
   577 :    if (*(<a href="../h_src/143317304.htm" class="localvar">p</a> + 1) == ')')  <a  class="comments">/* position capture? */</a>
   578 :    <a href="../h_src/143317440.htm" class="localvar">s</a> = <a href="../h_src/143320024.htm" class="function">start_capture</a>(<a href="../h_src/143317576.htm" class="localvar">ms</a>, <a href="../h_src/143317440.htm" class="localvar">s</a>, <a href="../h_src/143317304.htm" class="localvar">p</a> + 2, <a href="../h_src/143328456.htm" class="macro">CAP_POSITION</a>);
   579 :    else
   580 :    <a href="../h_src/143317440.htm" class="localvar">s</a> = <a href="../h_src/143320024.htm" class="function">start_capture</a>(<a href="../h_src/143317576.htm" class="localvar">ms</a>, <a href="../h_src/143317440.htm" class="localvar">s</a>, <a href="../h_src/143317304.htm" class="localvar">p</a> + 1, <a href="../h_src/143328592.htm" class="macro">CAP_UNFINISHED</a>);
   588 :    if ((<a href="../h_src/143317304.htm" class="localvar">p</a> + 1) != <a href="../h_src/143317576.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143328048.htm" class="variable">p_end</a>)  <a  class="comments">/* is the '$' the last char in pattern? */</a>
   589 :    goto dflt;  <a  class="comments">/* no; go to default */</a>
   605 :    if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>(*<a href="../h_src/143317304.htm" class="localvar">p</a> != '['))
   606 :    <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143317576.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327980.htm" class="variable">L</a>, &quot;missing '[' after '%%f' in pattern&quot;);
   636 :    else  <a  class="comments">/* '+' or no suffix */</a>
   637 :    <a href="../h_src/143317440.htm" class="localvar">s</a> = NULL;  <a  class="comments">/* fail */</a>
   643 :    if ((<a href="../h_src/143316760.htm" class="localvar">res</a> = <a href="../h_src/143327232.htm" class="function">match</a>(<a href="../h_src/143317576.htm" class="localvar">ms</a>, <a href="../h_src/143317440.htm" class="localvar">s</a> + 1, <a href="../h_src/143316896.htm" class="localvar">ep</a> + 1)) != NULL)
   644 :    <a href="../h_src/143317440.htm" class="localvar">s</a> = <a href="../h_src/143316760.htm" class="localvar">res</a>;
   675 :    if (<a href="../h_src/143316080.htm" class="localvar">l2</a> == 0) return <a href="../h_src/143316488.htm" class="localvar">s1</a>;  <a  class="comments">/* empty strings are everywhere */</a>
   676 :    else if (<a href="../h_src/143316080.htm" class="localvar">l2</a> &gt; <a href="../h_src/143316352.htm" class="localvar">l1</a>) return NULL;  <a  class="comments">/* avoids a negative 'l1' */</a>
   683 :    if (<a href="../h_aa/58131444.htm" class="libfunc">memcmp</a>(<a href="../h_src/143315944.htm" class="localvar">init</a>, <a href="../h_src/143316216.htm" class="localvar">s2</a>+1, <a href="../h_src/143316080.htm" class="localvar">l2</a>) == 0)
   684 :    return <a href="../h_src/143315944.htm" class="localvar">init</a>-1;
   705 :    if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>(<a href="../h_src/143315468.htm" class="localvar">i</a> != 0))
   706 :    <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143315604.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327980.htm" class="variable">L</a>, &quot;invalid capture index %%%d&quot;, <a href="../h_src/143315468.htm" class="localvar">i</a> + 1);
   713 :    if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>(<a href="../h_src/143314924.htm" class="localvar">capl</a> == <a href="../h_src/143328592.htm" class="macro">CAP_UNFINISHED</a>))
   714 :    <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143315604.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327980.htm" class="variable">L</a>, &quot;unfinished capture&quot;);
   715 :    else if (<a href="../h_src/143314924.htm" class="localvar">capl</a> == <a href="../h_src/143328456.htm" class="macro">CAP_POSITION</a>)
   716 :    <a href="../h_src/57435140.htm" class="function">lua_pushinteger</a>(<a href="../h_src/143315604.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327980.htm" class="variable">L</a>, (<a href="../h_src/143315604.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327368.htm" class="variable">capture</a>[<a href="../h_src/143315468.htm" class="localvar">i</a>].<a href="../h_src/143327708.htm" class="variable">init</a> - <a href="../h_src/143315604.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143328184.htm" class="variable">src_init</a>) + 1);
   729 :    if (<a href="../h_src/143313972.htm" class="localvar">l</a> != <a href="../h_src/143328456.htm" class="macro">CAP_POSITION</a>)
   730 :    <a href="../h_src/57435072.htm" class="function">lua_pushlstring</a>(<a href="../h_src/143314652.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327980.htm" class="variable">L</a>, <a href="../h_src/143314108.htm" class="localvar">cap</a>, <a href="../h_src/143313972.htm" class="localvar">l</a>);
   739 :    for (<a href="../h_src/143313292.htm" class="localvar">i</a> = 0; <a href="../h_src/143313292.htm" class="localvar">i</a> &lt; <a href="../h_src/143313156.htm" class="localvar">nlevels</a>; <a href="../h_src/143313292.htm" class="localvar">i</a>++)
   740 :    <a href="../h_src/143314788.htm" class="function">push_onecapture</a>(<a href="../h_src/143313700.htm" class="localvar">ms</a>, <a href="../h_src/143313292.htm" class="localvar">i</a>, <a href="../h_src/143313564.htm" class="localvar">s</a>, <a href="../h_src/143313428.htm" class="localvar">e</a>);
   749 :    if (<a href="../h_aa/57910840.htm" class="libfunc">strpbrk</a>(<a href="../h_src/143312884.htm" class="localvar">p</a> + <a href="../h_src/143312612.htm" class="localvar">upto</a>, <a href="../h_src/143326620.htm" class="macro">SPECIALS</a>))
   750 :    return 0;  <a  class="comments">/* pattern has a special character */</a>
   809 :    else
   810 :    return <a href="../h_src/143313836.htm" class="function">push_captures</a>(&amp;<a href="../h_src/143310028.htm" class="localvar">ms</a>, <a href="../h_src/143309892.htm" class="localvar">s1</a>, <a href="../h_src/143309620.htm" class="localvar">res</a>);
   862 :    if (<a href="../h_src/143306900.htm" class="localvar">init</a> &gt; <a href="../h_src/143307444.htm" class="localvar">ls</a>)  <a  class="comments">/* start after string's end? */</a>
   863 :    <a href="../h_src/143306900.htm" class="localvar">init</a> = <a href="../h_src/143307444.htm" class="localvar">ls</a> + 1;  <a  class="comments">/* avoid overflows in 's + init' */</a>
   880 :    if (*<a href="../h_src/143305540.htm" class="localvar">p</a> == <a href="../h_src/143326756.htm" class="macro">L_ESC</a>)  <a  class="comments">/* '%%' */</a>
   881 :    <a href="../h_src/57414060.htm" class="macro">luaL_addchar</a>(<a href="../h_src/57415216.htm" class="variable">b</a>, *<a href="../h_src/143305540.htm" class="localvar">p</a>);
   882 :    else if (*<a href="../h_src/143305540.htm" class="localvar">p</a> == '0')  <a  class="comments">/* '%0' */</a>
   883 :    <a href="../h_src/57413516.htm" class="function">luaL_addlstring</a>(<a href="../h_src/143306356.htm" class="localvar">b</a>, <a href="../h_src/143306220.htm" class="localvar">s</a>, <a href="../h_src/143306084.htm" class="localvar">e</a> - <a href="../h_src/143306220.htm" class="localvar">s</a>);
   887 :    if (<a href="../h_src/143305268.htm" class="localvar">resl</a> == <a href="../h_src/143328456.htm" class="macro">CAP_POSITION</a>)
   888 :    <a href="../h_src/57413380.htm" class="function">luaL_addvalue</a>(<a href="../h_src/143306356.htm" class="localvar">b</a>);  <a  class="comments">/* add position to accumulated result */</a>
   889 :    else
   890 :    <a href="../h_src/57413516.htm" class="function">luaL_addlstring</a>(<a href="../h_src/143306356.htm" class="localvar">b</a>, <a href="../h_src/143305404.htm" class="localvar">cap</a>, <a href="../h_src/143305268.htm" class="localvar">resl</a>);
   892 :    else
   893 :    <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143305812.htm" class="localvar">L</a>, &quot;invalid use of '%c' in replacement string&quot;, <a href="../h_src/143326756.htm" class="macro">L_ESC</a>);
   932 :    else if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>(!<a href="../h_src/57438812.htm" class="function">lua_isstring</a>(<a href="../h_src/143304316.htm" class="localvar">L</a>, -1)))
   933 :    return <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143304316.htm" class="localvar">L</a>, &quot;invalid replacement value (a %s)&quot;,
   934 :    <a href="../h_src/57416712.htm" class="macro">luaL_typename</a>(<a href="../h_src/143304316.htm" class="localvar">L</a>, -1));
   970 :    else if (<a href="../h_src/143303500.htm" class="localvar">src</a> &lt; <a href="../h_src/143302412.htm" class="localvar">ms</a>.<a href="../h_src/143328116.htm" class="variable">src_end</a>)  <a  class="comments">/* otherwise, skip one character */</a>
   971 :    <a href="../h_src/57414060.htm" class="macro">luaL_addchar</a>(&amp;<a href="../h_src/143302276.htm" class="localvar">b</a>, *<a href="../h_src/143303500.htm" class="localvar">src</a>++);
   972 :    else break;  <a  class="comments">/* end of subject */</a>
   973 :    if (<a href="../h_src/143302820.htm" class="localvar">anchor</a>) break;
   975 :    if (!<a href="../h_src/143302548.htm" class="localvar">changed</a>)  <a  class="comments">/* no changes? */</a>
   976 :    <a href="../h_src/57439220.htm" class="function">lua_pushvalue</a>(<a href="../h_src/143303908.htm" class="localvar">L</a>, 1);  <a  class="comments">/* return original string */</a>
  1026 :    if (<a href="../h_src/143300372.htm" class="localvar">x</a> != <a href="../h_src/143300372.htm" class="localvar">x</a> || <a href="../h_src/143300372.htm" class="localvar">x</a> == (<a href="../h_src/57442144.htm" class="type">lua_Number</a>)HUGE_VAL || <a href="../h_src/143300372.htm" class="localvar">x</a> == -(<a href="../h_src/57442144.htm" class="type">lua_Number</a>)HUGE_VAL)
  1027 :    return <a href="../h_src/57449692.htm" class="macro">l_sprintf</a>(<a href="../h_src/143300644.htm" class="localvar">buff</a>, <a href="../h_src/143300508.htm" class="localvar">sz</a>, <a href="../h_src/57451460.htm" class="macro">LUA_NUMBER_FMT</a>, (<a href="../h_src/57451732.htm" class="macro">LUAI_UACNUMBER</a>)<a href="../h_src/143300372.htm" class="localvar">x</a>);
  1061 :    for (<a href="../h_src/143298876.htm" class="localvar">i</a> = 0; <a href="../h_src/143298876.htm" class="localvar">i</a> &lt; <a href="../h_src/143299012.htm" class="localvar">n</a>; <a href="../h_src/143298876.htm" class="localvar">i</a>++)
  1062 :    <a href="../h_src/143299556.htm" class="localvar">buff</a>[<a href="../h_src/143298876.htm" class="localvar">i</a>] = <a href="../h_aa/58309704.htm" class="libfunc">toupper</a>(<a href="../h_src/143343552.htm" class="macro">uchar</a>(<a href="../h_src/143299556.htm" class="localvar">buff</a>[<a href="../h_src/143298876.htm" class="localvar">i</a>]));
  1064 :    else if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>(<a href="../h_src/143299284.htm" class="localvar">fmt</a>[<a href="../h_src/143301868.htm" class="macro">SIZELENMOD</a>] != 'a'))
  1065 :    return <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143299692.htm" class="localvar">L</a>, &quot;modifiers for format '%%a'/'%%A' not implemented&quot;);
  1131 :    if (!<a href="../h_aa/58309772.htm" class="libfunc">isdigit</a>(<a href="../h_src/143343552.htm" class="macro">uchar</a>(*(<a href="../h_src/143297244.htm" class="localvar">s</a>+1))))
  1132 :    <a href="../h_src/57449692.htm" class="macro">l_sprintf</a>(<a href="../h_src/143296972.htm" class="localvar">buff</a>, sizeof(<a href="../h_src/143296972.htm" class="localvar">buff</a>), &quot;\\%d&quot;, (int)<a href="../h_src/143343552.htm" class="macro">uchar</a>(*<a href="../h_src/143297244.htm" class="localvar">s</a>));
  1133 :    else
  1134 :    <a href="../h_src/57449692.htm" class="macro">l_sprintf</a>(<a href="../h_src/143296972.htm" class="localvar">buff</a>, sizeof(<a href="../h_src/143296972.htm" class="localvar">buff</a>), &quot;\\%03d&quot;, (int)<a href="../h_src/143343552.htm" class="macro">uchar</a>(*<a href="../h_src/143297244.htm" class="localvar">s</a>));
  1137 :    else
  1138 :    <a href="../h_src/57414060.htm" class="macro">luaL_addchar</a>(<a href="../h_src/57415216.htm" class="variable">b</a>, *<a href="../h_src/143297244.htm" class="localvar">s</a>);
  1153 :    if (<a href="../h_src/143296428.htm" class="localvar">n</a> == (<a href="../h_src/57442144.htm" class="type">lua_Number</a>)<a href="../h_src/57449420.htm" class="macro">HUGE_VAL</a>)  <a  class="comments">/* inf? */</a>
  1154 :    <a href="../h_src/143296292.htm" class="localvar">s</a> = &quot;1e9999&quot;;
  1155 :    else if (<a href="../h_src/143296428.htm" class="localvar">n</a> == -(<a href="../h_src/57442144.htm" class="type">lua_Number</a>)<a href="../h_src/57449420.htm" class="macro">HUGE_VAL</a>)  <a  class="comments">/* -inf? */</a>
  1156 :    <a href="../h_src/143296292.htm" class="localvar">s</a> = &quot;-1e9999&quot;;
  1157 :    else if (<a href="../h_src/143296428.htm" class="localvar">n</a> != <a href="../h_src/143296428.htm" class="localvar">n</a>)  <a  class="comments">/* NaN? */</a>
  1158 :    <a href="../h_src/143296292.htm" class="localvar">s</a> = &quot;(0/0)&quot;;
  1166 :    if (<a href="../h_src/143295884.htm" class="localvar">ppoint</a>) *<a href="../h_src/143295884.htm" class="localvar">ppoint</a> = '.';  <a  class="comments">/* change it to a dot */</a>
  1186 :    if (!<a href="../h_src/57438676.htm" class="function">lua_isinteger</a>(<a href="../h_src/143295612.htm" class="localvar">L</a>, <a href="../h_src/143295340.htm" class="localvar">arg</a>))  <a  class="comments">/* float? */</a>
  1187 :    <a href="../h_src/143294796.htm" class="localvar">nb</a> = <a href="../h_src/143296836.htm" class="function">quotefloat</a>(<a href="../h_src/143295612.htm" class="localvar">L</a>, <a href="../h_src/143294932.htm" class="localvar">buff</a>, <a href="../h_src/57429564.htm" class="macro">lua_tonumber</a>(<a href="../h_src/143295612.htm" class="localvar">L</a>, <a href="../h_src/143295340.htm" class="localvar">arg</a>));
  1213 :    if (<a href="../h_aa/58309772.htm" class="libfunc">isdigit</a>(<a href="../h_src/143343552.htm" class="macro">uchar</a>(*<a href="../h_src/143294252.htm" class="localvar">s</a>))) <a href="../h_src/143294252.htm" class="localvar">s</a>++;  <a  class="comments">/* (2 digits at most) */</a>
  1236 :    if (!<a href="../h_aa/143324716.htm" class="libfunc">isalpha</a>(<a href="../h_src/143343552.htm" class="macro">uchar</a>(*<a href="../h_src/143293436.htm" class="localvar">spec</a>)))  <a  class="comments">/* did not go to the end? */</a>
  1237 :    <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143293980.htm" class="localvar">L</a>, &quot;invalid conversion specification: '%s'&quot;, <a href="../h_src/143293844.htm" class="localvar">form</a>);
  1251 :    if (<a href="../h_src/143292756.htm" class="localvar">len</a> &gt;= <a href="../h_src/143297652.htm" class="macro">MAX_FORMAT</a> - 10)
  1252 :    <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143293164.htm" class="localvar">L</a>, &quot;invalid format (too long)&quot;);
  1283 :    if (*<a href="../h_src/143291124.htm" class="localvar">strfrmt</a> != <a href="../h_src/143326756.htm" class="macro">L_ESC</a>)
  1284 :    <a href="../h_src/57414060.htm" class="macro">luaL_addchar</a>(&amp;<a href="../h_src/143290716.htm" class="localvar">b</a>, *<a href="../h_src/143291124.htm" class="localvar">strfrmt</a>++);
  1285 :    else if (*++<a href="../h_src/143291124.htm" class="localvar">strfrmt</a> == <a href="../h_src/143326756.htm" class="macro">L_ESC</a>)
  1286 :    <a href="../h_src/57414060.htm" class="macro">luaL_addchar</a>(&amp;<a href="../h_src/143290716.htm" class="localvar">b</a>, *<a href="../h_src/143291124.htm" class="localvar">strfrmt</a>++);  <a  class="comments">/* %% */</a>
  1292 :    if (++<a href="../h_src/143291396.htm" class="localvar">arg</a> &gt; <a href="../h_src/143291532.htm" class="localvar">top</a>)
  1293 :    return <a href="../h_src/57420384.htm" class="function">luaL_argerror</a>(<a href="../h_src/143291668.htm" class="localvar">L</a>, <a href="../h_src/143291396.htm" class="localvar">arg</a>, &quot;no value&quot;);
  1344 :    if (<a href="../h_src/143290580.htm" class="localvar">form</a>[2] != '\0')  <a  class="comments">/* modifiers? */</a>
  1345 :    return <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143291668.htm" class="localvar">L</a>, &quot;specifier '%%q' cannot have modifiers&quot;);
  1352 :    if (<a href="../h_src/143290580.htm" class="localvar">form</a>[2] == '\0')  <a  class="comments">/* no modifiers? */</a>
  1353 :    <a href="../h_src/57413380.htm" class="function">luaL_addvalue</a>(&amp;<a href="../h_src/143290716.htm" class="localvar">b</a>);  <a  class="comments">/* keep entire string */</a>
  1450 :    if (!<a href="../h_src/143286840.htm" class="function">digit</a>(**<a href="../h_src/143286432.htm" class="localvar">fmt</a>))  <a  class="comments">/* no number? */</a>
  1451 :    return <a href="../h_src/143286296.htm" class="localvar">df</a>;  <a  class="comments">/* return default value */</a>
  1468 :    if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>(<a href="../h_src/143285412.htm" class="localvar">sz</a> &gt; <a href="../h_src/143289084.htm" class="macro">MAXINTSIZE</a> || sz &lt;= 0))
  1469 :    return <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143285820.htm" class="localvar">h</a>-&gt;<a href="../h_src/143288064.htm" class="variable">L</a>, &quot;integral size (%d) out of limits [1,%d]&quot;,
  1470 :    <a href="../h_src/143285412.htm" class="localvar">sz</a>, <a href="../h_src/143289084.htm" class="macro">MAXINTSIZE</a>);
  1511 :    if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>(*<a href="../h_src/143284460.htm" class="localvar">size</a> == -1))
  1512 :    <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143284732.htm" class="localvar">h</a>-&gt;<a href="../h_src/143288064.htm" class="variable">L</a>, &quot;missing size for format option 'c'&quot;);
  1546 :    if (**<a href="../h_src/143282896.htm" class="localvar">fmt</a> == '\0' || <a href="../h_src/143284868.htm" class="function">getoption</a>(<a href="../h_src/143283168.htm" class="localvar">h</a>, <a href="../h_src/143282896.htm" class="localvar">fmt</a>, &amp;<a href="../h_src/143282352.htm" class="localvar">align</a>) == <a href="../h_src/143287452.htm" class="variable">Kchar</a> || <a href="../h_src/143282352.htm" class="localvar">align</a> == 0)
  1547 :    <a href="../h_src/57420384.htm" class="function">luaL_argerror</a>(<a href="../h_src/143283168.htm" class="localvar">h</a>-&gt;<a href="../h_src/143288064.htm" class="variable">L</a>, 1, &quot;invalid next option for option 'X'&quot;);
  1549 :    if (<a href="../h_src/143282352.htm" class="localvar">align</a> &lt;= 1 || <a href="../h_src/143282488.htm" class="localvar">opt</a> == <a href="../h_src/143287452.htm" class="variable">Kchar</a>)  <a  class="comments">/* need no alignment? */</a>
  1550 :    *<a href="../h_src/143282624.htm" class="localvar">ntoalign</a> = 0;
  1552 :    if (<a href="../h_src/143282352.htm" class="localvar">align</a> &gt; <a href="../h_src/143283168.htm" class="localvar">h</a>-&gt;<a href="../h_src/143287928.htm" class="variable">maxalign</a>)  <a  class="comments">/* enforce maximum alignment */</a>
  1553 :    <a href="../h_src/143282352.htm" class="localvar">align</a> = <a href="../h_src/143283168.htm" class="localvar">h</a>-&gt;<a href="../h_src/143287928.htm" class="variable">maxalign</a>;
  1554 :    if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>((<a href="../h_src/143282352.htm" class="localvar">align</a> &amp; (<a href="../h_src/143282352.htm" class="localvar">align</a> - 1)) != 0))  <a  class="comments">/* not a power of 2? */</a>
  1555 :    <a href="../h_src/57420384.htm" class="function">luaL_argerror</a>(<a href="../h_src/143283168.htm" class="localvar">h</a>-&gt;<a href="../h_src/143288064.htm" class="variable">L</a>, 1, &quot;format asks for alignment not power of 2&quot;);
  1578 :    for (<a href="../h_src/143281264.htm" class="localvar">i</a> = <a href="../h_src/143288676.htm" class="macro">SZINT</a>; <a href="../h_src/143281264.htm" class="localvar">i</a> &lt; <a href="../h_src/143281672.htm" class="localvar">size</a>; <a href="../h_src/143281264.htm" class="localvar">i</a>++)  <a  class="comments">/* correct extra bytes */</a>
  1579 :    <a href="../h_src/143281400.htm" class="localvar">buff</a>[<a href="../h_src/143281808.htm" class="localvar">islittle</a> ? <a href="../h_src/143281264.htm" class="localvar">i</a> : <a href="../h_src/143281672.htm" class="localvar">size</a> - 1 - <a href="../h_src/143281264.htm" class="localvar">i</a>] = (char)<a href="../h_src/143288812.htm" class="macro">MC</a>;
  1591 :    if (<a href="../h_src/143280584.htm" class="localvar">islittle</a> == <a href="../h_src/143288268.htm" class="variable">nativeendian</a>.<a href="../h_src/143288404.htm" class="variable">little</a>)
  1592 :    <a href="../h_aa/57902680.htm" class="libfunc">memcpy</a>(<a href="../h_src/143280992.htm" class="localvar">dest</a>, <a href="../h_src/143280856.htm" class="localvar">src</a>, <a href="../h_src/143280720.htm" class="localvar">size</a>);
  1595 :    while (<a href="../h_src/143280720.htm" class="localvar">size</a>-- != 0)
  1596 :    *(<a href="../h_src/143280992.htm" class="localvar">dest</a>--) = *(<a href="../h_src/143280856.htm" class="localvar">src</a>++);
  1614 :    while (<a href="../h_src/143279360.htm" class="localvar">ntoalign</a>-- &gt; 0)
  1615 :    <a href="../h_src/57414060.htm" class="macro">luaL_addchar</a>(&amp;<a href="../h_src/143280176.htm" class="localvar">b</a>, <a href="../h_src/143289220.htm" class="macro">LUAL_PACKPADBYTE</a>);  <a  class="comments">/* fill alignment */</a>
  1629 :    if (<a href="../h_src/143279496.htm" class="localvar">size</a> &lt; <a href="../h_src/143288676.htm" class="macro">SZINT</a>)  <a  class="comments">/* need overflow check? */</a>
  1630 :    <a href="../h_src/57417256.htm" class="macro">luaL_argcheck</a>(L, (lua_Unsigned)n &lt; ((lua_Unsigned)1 &lt;&lt; (size * <a href="../h_src/143288948.htm" class="macro">NB</a>)),
  1631 :    arg, &quot;unsigned overflow&quot;);
  1665 :    while (<a href="../h_src/143437840.htm" class="localvar">len</a>++ &lt; (<a href="../h_aa/57441192.htm" class="type">size_t</a>)<a href="../h_src/143279496.htm" class="localvar">size</a>)  <a  class="comments">/* pad extra space */</a>
  1666 :    <a href="../h_src/57414060.htm" class="macro">luaL_addchar</a>(&amp;<a href="../h_src/143280176.htm" class="localvar">b</a>, <a href="../h_src/143289220.htm" class="macro">LUAL_PACKPADBYTE</a>);
  1746 :    if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>((unsigned char)<a href="../h_src/143435664.htm" class="localvar">str</a>[<a href="../h_src/143435528.htm" class="localvar">islittle</a> ? <a href="../h_src/143434984.htm" class="localvar">i</a> : <a href="../h_src/143435392.htm" class="localvar">size</a> - 1 - <a href="../h_src/143434984.htm" class="localvar">i</a>] != <a href="../h_src/143434576.htm" class="localvar">mask</a>))
  1747 :    <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143435800.htm" class="localvar">L</a>, &quot;%d-byte integer does not fit into Lua Integer&quot;, <a href="../h_src/143435392.htm" class="localvar">size</a>);
</pre>
<pre>
</pre>
<h5>Missing Default Case</h5>
<pre>
  1690 :    case <a href="../h_src/143287180.htm" class="variable">Kpaddalign</a>: case <a href="../h_src/143287112.htm" class="variable">Knop</a>:
  1817 :    case <a href="../h_src/143287180.htm" class="variable">Kpaddalign</a>: case <a href="../h_src/143287248.htm" class="variable">Kpadding</a>: case <a href="../h_src/143287112.htm" class="variable">Knop</a>:
</pre>
<pre>
</pre>
<h5>Unterminated Case</h5>
<pre>
   651 :    <a href="../h_src/143317440.htm" class="localvar">s</a>++;  <a  class="comments">/* 1 match already done */</a>
  1204 :    <a href="../h_src/57420384.htm" class="function">luaL_argerror</a>(<a href="../h_src/143295612.htm" class="localvar">L</a>, <a href="../h_src/143295340.htm" class="localvar">arg</a>, &quot;value has no literal form&quot;);
  1324 :    <a href="../h_src/143290308.htm" class="localvar">buff</a> = <a href="../h_src/57413584.htm" class="function">luaL_prepbuffsize</a>(&amp;<a href="../h_src/143290716.htm" class="localvar">b</a>, <a href="../h_src/143290444.htm" class="localvar">maxitem</a>);
  1526 :    default: <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143284732.htm" class="localvar">h</a>-&gt;<a href="../h_src/143288064.htm" class="variable">L</a>, &quot;invalid format option '%c'&quot;, <a href="../h_src/143283576.htm" class="localvar">opt</a>);
  1689 :    case <a href="../h_src/143287248.htm" class="variable">Kpadding</a>: <a href="../h_src/57414060.htm" class="macro">luaL_addchar</a>(&amp;<a href="../h_src/143280176.htm" class="localvar">b</a>, <a href="../h_src/143289220.htm" class="macro">LUAL_PACKPADBYTE</a>);  <a  class="comments">/* FALLTHROUGH */</a>
</pre>
<pre>
</pre>
<h5>Jump Statement</h5>
<pre>
   589 :    goto dflt;  <a  class="comments">/* no; go to default */</a>
   598 :    <a href="../h_src/143317304.htm" class="localvar">p</a> += 4; goto init;  <a  class="comments">/* return match(ms, s, p + 4); */</a>
   611 :    <a href="../h_src/143317304.htm" class="localvar">p</a> = <a href="../h_src/143317168.htm" class="localvar">ep</a>; goto init;  <a  class="comments">/* return match(ms, s, ep); */</a>
   621 :    <a href="../h_src/143317304.htm" class="localvar">p</a> += 2; goto init;  <a  class="comments">/* return match(ms, s, p + 2) */</a>
   625 :    default: goto dflt;
   634 :    <a href="../h_src/143317304.htm" class="localvar">p</a> = <a href="../h_src/143316896.htm" class="localvar">ep</a> + 1; goto init;  <a  class="comments">/* return match(ms, s, ep + 1); */</a>
   646 :    <a href="../h_src/143317304.htm" class="localvar">p</a> = <a href="../h_src/143316896.htm" class="localvar">ep</a> + 1; goto init;  <a  class="comments">/* else return match(ms, s, ep + 1); */</a>
   660 :    <a href="../h_src/143317440.htm" class="localvar">s</a>++; <a href="../h_src/143317304.htm" class="localvar">p</a> = <a href="../h_src/143316896.htm" class="localvar">ep</a>; goto init;  <a  class="comments">/* return match(ms, s + 1, ep); */</a>
   972 :    else break;  <a  class="comments">/* end of subject */</a>
   973 :    if (<a href="../h_src/143302820.htm" class="localvar">anchor</a>) break;
  1303 :    goto intcase;
  1306 :    goto intcase;
</pre>
<pre>
</pre>
<h5>Return Ignored</h5>
<pre>
    57 :    <a href="../h_src/57420248.htm" class="function">luaL_checklstring</a>(<a href="../h_src/143343008.htm" class="localvar">L</a>, 1, &amp;<a href="../h_src/143342872.htm" class="localvar">l</a>);
   106 :    <a href="../h_src/57435072.htm" class="function">lua_pushlstring</a>(<a href="../h_src/143341376.htm" class="localvar">L</a>, <a href="../h_src/143341104.htm" class="localvar">s</a> + <a href="../h_src/143340968.htm" class="localvar">start</a> - 1, (<a href="../h_src/143340832.htm" class="localvar">end</a> - <a href="../h_src/143340968.htm" class="localvar">start</a>) + 1);
   107 :    else <a href="../h_src/57427660.htm" class="macro">lua_pushliteral</a>(<a href="../h_src/143341376.htm" class="localvar">L</a>, &quot;&quot;);
   156 :    <a href="../h_src/57427660.htm" class="macro">lua_pushliteral</a>(<a href="../h_src/143337636.htm" class="localvar">L</a>, &quot;&quot;);
   281 :    <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143331652.htm" class="localvar">L</a>, &quot;attempt to %s a '%s' with a '%s'&quot;, <a href="../h_src/143331516.htm" class="localvar">mtname</a> + 2,
   282 :    <a href="../h_src/57416712.htm" class="macro">luaL_typename</a>(<a href="../h_src/143331652.htm" class="localvar">L</a>, -2), <a href="../h_src/57416712.htm" class="macro">luaL_typename</a>(<a href="../h_src/143331652.htm" class="localvar">L</a>, -1));
   407 :    <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143325532.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327980.htm" class="variable">L</a>, &quot;malformed pattern (ends with '%%')&quot;);
   414 :    <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143325532.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327980.htm" class="variable">L</a>, &quot;malformed pattern (missing ']')&quot;);
   489 :    <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143322608.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327980.htm" class="variable">L</a>, &quot;malformed pattern (missing arguments to '%%b')&quot;);
   538 :    if (<a href="../h_src/143319208.htm" class="localvar">level</a> &gt;= <a href="../h_src/143343688.htm" class="macro">LUA_MAXCAPTURES</a>) <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143319888.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327980.htm" class="variable">L</a>, &quot;too many captures&quot;);
   572 :    <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143317576.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327980.htm" class="variable">L</a>, &quot;pattern too complex&quot;);
   606 :    <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143317576.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327980.htm" class="variable">L</a>, &quot;missing '[' after '%%f' in pattern&quot;);
   706 :    <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143315604.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327980.htm" class="variable">L</a>, &quot;invalid capture index %%%d&quot;, <a href="../h_src/143315468.htm" class="localvar">i</a> + 1);
   714 :    <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143315604.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327980.htm" class="variable">L</a>, &quot;unfinished capture&quot;);
   730 :    <a href="../h_src/57435072.htm" class="function">lua_pushlstring</a>(<a href="../h_src/143314652.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327980.htm" class="variable">L</a>, <a href="../h_src/143314108.htm" class="localvar">cap</a>, <a href="../h_src/143313972.htm" class="localvar">l</a>);
   893 :    <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143305812.htm" class="localvar">L</a>, &quot;invalid use of '%c' in replacement string&quot;, <a href="../h_src/143326756.htm" class="macro">L_ESC</a>);
   919 :    <a href="../h_src/57434324.htm" class="function">lua_gettable</a>(<a href="../h_src/143304316.htm" class="localvar">L</a>, 3);
  1199 :    <a href="../h_src/57420452.htm" class="function">luaL_tolstring</a>(<a href="../h_src/143295612.htm" class="localvar">L</a>, <a href="../h_src/143295340.htm" class="localvar">arg</a>, NULL);
  1204 :    <a href="../h_src/57420384.htm" class="function">luaL_argerror</a>(<a href="../h_src/143295612.htm" class="localvar">L</a>, <a href="../h_src/143295340.htm" class="localvar">arg</a>, &quot;value has no literal form&quot;);
  1237 :    <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143293980.htm" class="localvar">L</a>, &quot;invalid conversion specification: '%s'&quot;, <a href="../h_src/143293844.htm" class="localvar">form</a>);
  1252 :    <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143293164.htm" class="localvar">L</a>, &quot;invalid format (too long)&quot;);
  1512 :    <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143284732.htm" class="localvar">h</a>-&gt;<a href="../h_src/143288064.htm" class="variable">L</a>, &quot;missing size for format option 'c'&quot;);
  1526 :    default: <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143284732.htm" class="localvar">h</a>-&gt;<a href="../h_src/143288064.htm" class="variable">L</a>, &quot;invalid format option '%c'&quot;, <a href="../h_src/143283576.htm" class="localvar">opt</a>);
  1547 :    <a href="../h_src/57420384.htm" class="function">luaL_argerror</a>(<a href="../h_src/143283168.htm" class="localvar">h</a>-&gt;<a href="../h_src/143288064.htm" class="variable">L</a>, 1, &quot;invalid next option for option 'X'&quot;);
  1555 :    <a href="../h_src/57420384.htm" class="function">luaL_argerror</a>(<a href="../h_src/143283168.htm" class="localvar">h</a>-&gt;<a href="../h_src/143288064.htm" class="variable">L</a>, 1, &quot;format asks for alignment not power of 2&quot;);
  1747 :    <a href="../h_src/57419296.htm" class="function">luaL_error</a>(<a href="../h_src/143435800.htm" class="localvar">L</a>, &quot;%d-byte integer does not fit into Lua Integer&quot;, <a href="../h_src/143435392.htm" class="localvar">size</a>);
  1799 :    <a href="../h_src/57435072.htm" class="function">lua_pushlstring</a>(<a href="../h_src/143434304.htm" class="localvar">L</a>, <a href="../h_src/143433760.htm" class="localvar">data</a> + <a href="../h_src/143433624.htm" class="localvar">pos</a>, <a href="../h_src/143433352.htm" class="localvar">size</a>);
  1805 :    <a href="../h_src/57435072.htm" class="function">lua_pushlstring</a>(<a href="../h_src/143434304.htm" class="localvar">L</a>, <a href="../h_src/143433760.htm" class="localvar">data</a> + <a href="../h_src/143433624.htm" class="localvar">pos</a> + <a href="../h_src/143433352.htm" class="localvar">size</a>, <a href="../h_src/143432400.htm" class="localvar">len</a>);
  1813 :    <a href="../h_src/57435072.htm" class="function">lua_pushlstring</a>(<a href="../h_src/143434304.htm" class="localvar">L</a>, <a href="../h_src/143433760.htm" class="localvar">data</a> + <a href="../h_src/143433624.htm" class="localvar">pos</a>, <a href="../h_src/143432264.htm" class="localvar">len</a>);
  1856 :    <a href="../h_src/57427660.htm" class="macro">lua_pushliteral</a>(<a href="../h_src/143431924.htm" class="localvar">L</a>, &quot;&quot;);  <a  class="comments">/* dummy string */</a>
  1858 :    <a href="../h_src/57433168.htm" class="function">lua_setmetatable</a>(<a href="../h_src/143431924.htm" class="localvar">L</a>, -2);  <a  class="comments">/* set table as metatable for strings */</a>
</pre>
<pre>
</pre>
<h5>Missing/Mismatched Function Declarator</h5>
<pre>
   131 :    <a href="../h_src/143338928.htm" class="localvar">p</a>[<a href="../h_src/143339336.htm" class="localvar">i</a>] = <a href="../h_aa/143338792.htm" class="libfunc">tolower</a>(<a href="../h_src/143343552.htm" class="macro">uchar</a>(<a href="../h_src/143339064.htm" class="localvar">s</a>[<a href="../h_src/143339336.htm" class="localvar">i</a>]));
   144 :    <a href="../h_src/143337908.htm" class="localvar">p</a>[<a href="../h_src/143338316.htm" class="localvar">i</a>] = <a href="../h_aa/58309704.htm" class="libfunc">toupper</a>(<a href="../h_src/143343552.htm" class="macro">uchar</a>(<a href="../h_src/143338044.htm" class="localvar">s</a>[<a href="../h_src/143338316.htm" class="localvar">i</a>]));
   157 :    else if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>(<a href="../h_src/143337500.htm" class="localvar">l</a> + <a href="../h_src/143337364.htm" class="localvar">lsep</a> &lt; <a href="../h_src/143337500.htm" class="localvar">l</a> || <a href="../h_src/143337500.htm" class="localvar">l</a> + <a href="../h_src/143337364.htm" class="localvar">lsep</a> &gt; <a href="../h_src/143343280.htm" class="macro">MAXSIZE</a> / <a href="../h_src/143337092.htm" class="localvar">n</a>))
   164 :    <a href="../h_aa/57902680.htm" class="libfunc">memcpy</a>(<a href="../h_src/143336548.htm" class="localvar">p</a>, <a href="../h_src/143337228.htm" class="localvar">s</a>, <a href="../h_src/143337500.htm" class="localvar">l</a> * sizeof(char)); <a href="../h_src/143336548.htm" class="localvar">p</a> += <a href="../h_src/143337500.htm" class="localvar">l</a>;
   166 :    <a href="../h_aa/57902680.htm" class="libfunc">memcpy</a>(<a href="../h_src/143336548.htm" class="localvar">p</a>, <a href="../h_src/143336956.htm" class="localvar">sep</a>, <a href="../h_src/143337364.htm" class="localvar">lsep</a> * sizeof(char));
   170 :    <a href="../h_aa/57902680.htm" class="libfunc">memcpy</a>(<a href="../h_src/143336548.htm" class="localvar">p</a>, <a href="../h_src/143337228.htm" class="localvar">s</a>, <a href="../h_src/143337500.htm" class="localvar">l</a> * sizeof(char));  <a  class="comments">/* last copy (not followed by separator) */</a>
   185 :    if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>(<a href="../h_src/143335596.htm" class="localvar">pose</a> - <a href="../h_src/143335732.htm" class="localvar">posi</a> &gt;= (<a href="../h_aa/57441192.htm" class="type">size_t</a>)INT_MAX))  <a  class="comments">/* arithmetic overflow? */</a>
   202 :    <a href="../h_src/57417256.htm" class="macro">luaL_argcheck</a>(<a href="../h_src/143335052.htm" class="localvar">L</a>, <a href="../h_src/143334372.htm" class="localvar">c</a> &lt;= (<a href="../h_src/57438132.htm" class="function">lua_Unsigned</a>)UCHAR_MAX, <a href="../h_src/143334780.htm" class="localvar">i</a>, &quot;value out of range&quot;);
   239 :    if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>(<a href="../h_src/57432556.htm" class="function">lua_dump</a>(<a href="../h_src/143332876.htm" class="localvar">L</a>, <a href="../h_src/143333964.htm" class="function">writer</a>, &amp;<a href="../h_src/143332740.htm" class="localvar">state</a>, <a href="../h_src/143332604.htm" class="localvar">strip</a>) != 0))
   279 :    if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>(<a href="../h_src/57438540.htm" class="function">lua_type</a>(<a href="../h_src/143331652.htm" class="localvar">L</a>, 2) == <a href="../h_src/57443504.htm" class="macro">LUA_TSTRING</a> ||
   280 :    !<a href="../h_src/57420588.htm" class="function">luaL_getmetafield</a>(<a href="../h_src/143331652.htm" class="localvar">L</a>, 2, <a href="../h_src/143331516.htm" class="localvar">mtname</a>)))
   388 :    if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>(<a href="../h_src/143326212.htm" class="localvar">l</a> &lt; 0 || <a href="../h_src/143326212.htm" class="localvar">l</a> &gt;= <a href="../h_src/143326348.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327844.htm" class="variable">level</a> ||
   389 :    <a href="../h_src/143326348.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327368.htm" class="variable">capture</a>[<a href="../h_src/143326212.htm" class="localvar">l</a>].<a href="../h_src/143327640.htm" class="variable">len</a> == <a href="../h_src/143328592.htm" class="macro">CAP_UNFINISHED</a>))
   406 :    if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>(<a href="../h_src/143325396.htm" class="localvar">p</a> == <a href="../h_src/143325532.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143328048.htm" class="variable">p_end</a>))
   413 :    if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>(<a href="../h_src/143325396.htm" class="localvar">p</a> == <a href="../h_src/143325532.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143328048.htm" class="variable">p_end</a>))
   429 :    switch (<a href="../h_aa/143338792.htm" class="libfunc">tolower</a>(<a href="../h_src/143324988.htm" class="localvar">cl</a>)) {
   430 :    case 'a' : <a href="../h_src/143324852.htm" class="localvar">res</a> = <a href="../h_aa/143324716.htm" class="libfunc">isalpha</a>(<a href="../h_src/143325124.htm" class="localvar">c</a>); break;
   431 :    case 'c' : <a href="../h_src/143324852.htm" class="localvar">res</a> = <a href="../h_aa/143324648.htm" class="libfunc">iscntrl</a>(<a href="../h_src/143325124.htm" class="localvar">c</a>); break;
   432 :    case 'd' : <a href="../h_src/143324852.htm" class="localvar">res</a> = <a href="../h_aa/58309772.htm" class="libfunc">isdigit</a>(<a href="../h_src/143325124.htm" class="localvar">c</a>); break;
   433 :    case 'g' : <a href="../h_src/143324852.htm" class="localvar">res</a> = <a href="../h_aa/143324580.htm" class="libfunc">isgraph</a>(<a href="../h_src/143325124.htm" class="localvar">c</a>); break;
   434 :    case 'l' : <a href="../h_src/143324852.htm" class="localvar">res</a> = <a href="../h_aa/143324512.htm" class="libfunc">islower</a>(<a href="../h_src/143325124.htm" class="localvar">c</a>); break;
   435 :    case 'p' : <a href="../h_src/143324852.htm" class="localvar">res</a> = <a href="../h_aa/143324444.htm" class="libfunc">ispunct</a>(<a href="../h_src/143325124.htm" class="localvar">c</a>); break;
   436 :    case 's' : <a href="../h_src/143324852.htm" class="localvar">res</a> = <a href="../h_aa/143324376.htm" class="libfunc">isspace</a>(<a href="../h_src/143325124.htm" class="localvar">c</a>); break;
   437 :    case 'u' : <a href="../h_src/143324852.htm" class="localvar">res</a> = <a href="../h_aa/143324308.htm" class="libfunc">isupper</a>(<a href="../h_src/143325124.htm" class="localvar">c</a>); break;
   438 :    case 'w' : <a href="../h_src/143324852.htm" class="localvar">res</a> = <a href="../h_aa/58309840.htm" class="libfunc">isalnum</a>(<a href="../h_src/143325124.htm" class="localvar">c</a>); break;
   439 :    case 'x' : <a href="../h_src/143324852.htm" class="localvar">res</a> = <a href="../h_aa/143248420.htm" class="libfunc">isxdigit</a>(<a href="../h_src/143325124.htm" class="localvar">c</a>); break;
   443 :    return (<a href="../h_aa/143324512.htm" class="libfunc">islower</a>(<a href="../h_src/143324988.htm" class="localvar">cl</a>) ? <a href="../h_src/143324852.htm" class="localvar">res</a> : !<a href="../h_src/143324852.htm" class="localvar">res</a>);
   488 :    if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>(<a href="../h_src/143322336.htm" class="localvar">p</a> &gt;= <a href="../h_src/143322608.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143328048.htm" class="variable">p_end</a> - 1))
   564 :    <a href="../h_aa/58131444.htm" class="libfunc">memcmp</a>(<a href="../h_src/143318120.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327368.htm" class="variable">capture</a>[<a href="../h_src/143317848.htm" class="localvar">l</a>].<a href="../h_src/143327708.htm" class="variable">init</a>, <a href="../h_src/143317984.htm" class="localvar">s</a>, <a href="../h_src/143317712.htm" class="localvar">len</a>) == 0)
   571 :    if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>(<a href="../h_src/143317576.htm" class="localvar">ms</a>-&gt;<a href="../h_src/143327912.htm" class="variable">matchdepth</a>-- == 0))
   605 :    if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>(*<a href="../h_src/143317304.htm" class="localvar">p</a> != '['))
   681 :    while (<a href="../h_src/143316352.htm" class="localvar">l1</a> &gt; 0 &amp;&amp; (<a href="../h_src/143315944.htm" class="localvar">init</a> = (const char *)<a href="../h_aa/143315808.htm" class="libfunc">memchr</a>(<a href="../h_src/143316488.htm" class="localvar">s1</a>, *<a href="../h_src/143316216.htm" class="localvar">s2</a>, <a href="../h_src/143316352.htm" class="localvar">l1</a>)) != NULL) {
   683 :    if (<a href="../h_aa/58131444.htm" class="libfunc">memcmp</a>(<a href="../h_src/143315944.htm" class="localvar">init</a>, <a href="../h_src/143316216.htm" class="localvar">s2</a>+1, <a href="../h_src/143316080.htm" class="localvar">l2</a>) == 0)
   705 :    if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>(<a href="../h_src/143315468.htm" class="localvar">i</a> != 0))
   713 :    if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>(<a href="../h_src/143314924.htm" class="localvar">capl</a> == <a href="../h_src/143328592.htm" class="macro">CAP_UNFINISHED</a>))
   749 :    if (<a href="../h_aa/57910840.htm" class="libfunc">strpbrk</a>(<a href="../h_src/143312884.htm" class="localvar">p</a> + <a href="../h_src/143312612.htm" class="localvar">upto</a>, <a href="../h_src/143326620.htm" class="macro">SPECIALS</a>))
   751 :    <a href="../h_src/143312612.htm" class="localvar">upto</a> += <a href="../h_aa/57568976.htm" class="libfunc">strlen</a>(<a href="../h_src/143312884.htm" class="localvar">p</a> + <a href="../h_src/143312612.htm" class="localvar">upto</a>) + 1;  <a  class="comments">/* may have more after \0 */</a>
   877 :    while ((<a href="../h_src/143305540.htm" class="localvar">p</a> = (char *)<a href="../h_aa/143315808.htm" class="libfunc">memchr</a>(<a href="../h_src/143305676.htm" class="localvar">news</a>, <a href="../h_src/143326756.htm" class="macro">L_ESC</a>, <a href="../h_src/143305948.htm" class="localvar">l</a>)) != NULL) {
   884 :    else if (<a href="../h_aa/58309772.htm" class="libfunc">isdigit</a>(<a href="../h_src/143343552.htm" class="macro">uchar</a>(*<a href="../h_src/143305540.htm" class="localvar">p</a>))) {  <a  class="comments">/* '%n' */</a>
   932 :    else if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>(!<a href="../h_src/57438812.htm" class="function">lua_isstring</a>(<a href="../h_src/143304316.htm" class="localvar">L</a>, -1)))
   954 :    <a href="../h_src/57417120.htm" class="macro">luaL_argexpected</a>(<a href="../h_src/143303908.htm" class="localvar">L</a>, <a href="../h_src/143303092.htm" class="localvar">tr</a> == <a href="../h_src/57443640.htm" class="macro">LUA_TNUMBER</a> || tr == <a href="../h_src/57443504.htm" class="macro">LUA_TSTRING</a> ||
   955 :    <a href="../h_src/143303092.htm" class="localvar">tr</a> == <a href="../h_src/57443232.htm" class="macro">LUA_TFUNCTION</a> || tr == <a href="../h_src/57443368.htm" class="macro">LUA_TTABLE</a>, 3,
  1017 :    <a href="../h_src/57442144.htm" class="type">lua_Number</a> <a href="../h_src/143301052.htm" class="localvar">dd</a> = <a href="../h_src/57449148.htm" class="macro">l_mathop</a>(<a href="../h_aa/57917572.htm" class="libfunc">floor</a>)(<a href="../h_src/143301188.htm" class="localvar">x</a>);  <a  class="comments">/* get integer part from 'x' */</a>
  1027 :    return <a href="../h_src/57449692.htm" class="macro">l_sprintf</a>(<a href="../h_src/143300644.htm" class="localvar">buff</a>, <a href="../h_src/143300508.htm" class="localvar">sz</a>, <a href="../h_src/57451460.htm" class="macro">LUA_NUMBER_FMT</a>, (<a href="../h_src/57451732.htm" class="macro">LUAI_UACNUMBER</a>)<a href="../h_src/143300372.htm" class="localvar">x</a>);
  1030 :    return <a href="../h_src/57449692.htm" class="macro">l_sprintf</a>(<a href="../h_src/143300644.htm" class="localvar">buff</a>, <a href="../h_src/143300508.htm" class="localvar">sz</a>, <a href="../h_src/57451460.htm" class="macro">LUA_NUMBER_FMT</a> &quot;x0p+0&quot;, (<a href="../h_src/57451732.htm" class="macro">LUAI_UACNUMBER</a>)<a href="../h_src/143300372.htm" class="localvar">x</a>);
  1034 :    <a href="../h_src/57442144.htm" class="type">lua_Number</a> <a href="../h_src/143300100.htm" class="localvar">m</a> = <a href="../h_src/57449148.htm" class="macro">l_mathop</a>(<a href="../h_aa/58118864.htm" class="libfunc">frexp</a>)(<a href="../h_src/143300372.htm" class="localvar">x</a>, &amp;<a href="../h_src/143300236.htm" class="localvar">e</a>);  <a  class="comments">/* 'x' fraction and exponent */</a>
  1044 :    <a href="../h_src/143300644.htm" class="localvar">buff</a>[<a href="../h_src/143299964.htm" class="localvar">n</a>++] = <a href="../h_src/57448468.htm" class="macro">lua_getlocaledecpoint</a>();  <a  class="comments">/* add radix point */</a>
  1049 :    <a href="../h_src/143299964.htm" class="localvar">n</a> += <a href="../h_src/57449692.htm" class="macro">l_sprintf</a>(<a href="../h_src/143300644.htm" class="localvar">buff</a> + <a href="../h_src/143299964.htm" class="localvar">n</a>, <a href="../h_src/143300508.htm" class="localvar">sz</a> - <a href="../h_src/143299964.htm" class="localvar">n</a>, &quot;p%+d&quot;, <a href="../h_src/143300236.htm" class="localvar">e</a>);  <a  class="comments">/* add exponent */</a>
  1062 :    <a href="../h_src/143299556.htm" class="localvar">buff</a>[<a href="../h_src/143298876.htm" class="localvar">i</a>] = <a href="../h_aa/58309704.htm" class="libfunc">toupper</a>(<a href="../h_src/143343552.htm" class="macro">uchar</a>(<a href="../h_src/143299556.htm" class="localvar">buff</a>[<a href="../h_src/143298876.htm" class="localvar">i</a>]));
  1064 :    else if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>(<a href="../h_src/143299284.htm" class="localvar">fmt</a>[<a href="../h_src/143301868.htm" class="macro">SIZELENMOD</a>] != 'a'))
  1129 :    else if (<a href="../h_aa/143324648.htm" class="libfunc">iscntrl</a>(<a href="../h_src/143343552.htm" class="macro">uchar</a>(*<a href="../h_src/143297244.htm" class="localvar">s</a>))) {
  1131 :    if (!<a href="../h_aa/58309772.htm" class="libfunc">isdigit</a>(<a href="../h_src/143343552.htm" class="macro">uchar</a>(*(<a href="../h_src/143297244.htm" class="localvar">s</a>+1))))
  1132 :    <a href="../h_src/57449692.htm" class="macro">l_sprintf</a>(<a href="../h_src/143296972.htm" class="localvar">buff</a>, sizeof(<a href="../h_src/143296972.htm" class="localvar">buff</a>), &quot;\\%d&quot;, (int)<a href="../h_src/143343552.htm" class="macro">uchar</a>(*<a href="../h_src/143297244.htm" class="localvar">s</a>));
  1134 :    <a href="../h_src/57449692.htm" class="macro">l_sprintf</a>(<a href="../h_src/143296972.htm" class="localvar">buff</a>, sizeof(<a href="../h_src/143296972.htm" class="localvar">buff</a>), &quot;\\%03d&quot;, (int)<a href="../h_src/143343552.htm" class="macro">uchar</a>(*<a href="../h_src/143297244.htm" class="localvar">s</a>));
  1163 :    if (<a href="../h_aa/143315808.htm" class="libfunc">memchr</a>(<a href="../h_src/143296564.htm" class="localvar">buff</a>, '.', <a href="../h_src/143296156.htm" class="localvar">nb</a>) == NULL) {  <a  class="comments">/* no dot? */</a>
  1164 :    char <a href="../h_src/143296020.htm" class="localvar">point</a> = <a href="../h_src/57448468.htm" class="macro">lua_getlocaledecpoint</a>();  <a  class="comments">/* try locale point */</a>
  1165 :    char *<a href="../h_src/143295884.htm" class="localvar">ppoint</a> = (char *)<a href="../h_aa/143315808.htm" class="libfunc">memchr</a>(<a href="../h_src/143296564.htm" class="localvar">buff</a>, <a href="../h_src/143296020.htm" class="localvar">point</a>, <a href="../h_src/143296156.htm" class="localvar">nb</a>);
  1171 :    return <a href="../h_src/57449692.htm" class="macro">l_sprintf</a>(<a href="../h_src/143296564.htm" class="localvar">buff</a>, <a href="../h_src/143298604.htm" class="macro">MAX_ITEM</a>, &quot;%s&quot;, <a href="../h_src/143296292.htm" class="localvar">s</a>);
  1193 :    <a href="../h_src/143294796.htm" class="localvar">nb</a> = <a href="../h_src/57449692.htm" class="macro">l_sprintf</a>(<a href="../h_src/143294932.htm" class="localvar">buff</a>, <a href="../h_src/143298604.htm" class="macro">MAX_ITEM</a>, <a href="../h_src/143294524.htm" class="localvar">format</a>, (<a href="../h_src/57450916.htm" class="macro">LUAI_UACINT</a>)<a href="../h_src/143294660.htm" class="localvar">n</a>);
  1211 :    if (<a href="../h_aa/58309772.htm" class="libfunc">isdigit</a>(<a href="../h_src/143343552.htm" class="macro">uchar</a>(*<a href="../h_src/143294252.htm" class="localvar">s</a>))) {
  1213 :    if (<a href="../h_aa/58309772.htm" class="libfunc">isdigit</a>(<a href="../h_src/143343552.htm" class="macro">uchar</a>(*<a href="../h_src/143294252.htm" class="localvar">s</a>))) <a href="../h_src/143294252.htm" class="localvar">s</a>++;  <a  class="comments">/* (2 digits at most) */</a>
  1228 :    <a href="../h_src/143293436.htm" class="localvar">spec</a> += <a href="../h_aa/57906692.htm" class="libfunc">strspn</a>(<a href="../h_src/143293436.htm" class="localvar">spec</a>, <a href="../h_src/143293708.htm" class="localvar">flags</a>);  <a  class="comments">/* skip flags */</a>
  1236 :    if (!<a href="../h_aa/143324716.htm" class="libfunc">isalpha</a>(<a href="../h_src/143343552.htm" class="macro">uchar</a>(*<a href="../h_src/143293436.htm" class="localvar">spec</a>)))  <a  class="comments">/* did not go to the end? */</a>
  1248 :    <a href="../h_aa/57441192.htm" class="type">size_t</a> <a href="../h_src/143292756.htm" class="localvar">len</a> = <a href="../h_aa/57906692.htm" class="libfunc">strspn</a>(<a href="../h_src/143293028.htm" class="localvar">strfrmt</a>, <a href="../h_src/143298332.htm" class="macro">L_FMTFLAGSF</a> &quot;123456789.&quot;);
  1254 :    <a href="../h_aa/57902680.htm" class="libfunc">memcpy</a>(<a href="../h_src/143292892.htm" class="localvar">form</a>, <a href="../h_src/143293028.htm" class="localvar">strfrmt</a>, <a href="../h_src/143292756.htm" class="localvar">len</a> * sizeof(char));
  1264 :    <a href="../h_aa/57441192.htm" class="type">size_t</a> <a href="../h_src/143292212.htm" class="localvar">l</a> = <a href="../h_aa/57568976.htm" class="libfunc">strlen</a>(<a href="../h_src/143292484.htm" class="localvar">form</a>);
  1265 :    <a href="../h_aa/57441192.htm" class="type">size_t</a> <a href="../h_src/143292076.htm" class="localvar">lm</a> = <a href="../h_aa/57568976.htm" class="libfunc">strlen</a>(<a href="../h_src/143292348.htm" class="localvar">lenmod</a>);
  1267 :    <a href="../h_aa/57910228.htm" class="libfunc">strcpy</a>(<a href="../h_src/143292484.htm" class="localvar">form</a> + <a href="../h_src/143292212.htm" class="localvar">l</a> - 1, <a href="../h_src/143292348.htm" class="localvar">lenmod</a>);
  1298 :    <a href="../h_src/143290172.htm" class="localvar">nb</a> = <a href="../h_src/57449692.htm" class="macro">l_sprintf</a>(<a href="../h_src/143290308.htm" class="localvar">buff</a>, <a href="../h_src/143290444.htm" class="localvar">maxitem</a>, <a href="../h_src/143290580.htm" class="localvar">form</a>, (int)<a href="../h_src/57419976.htm" class="function">luaL_checkinteger</a>(<a href="../h_src/143291668.htm" class="localvar">L</a>, <a href="../h_src/143291396.htm" class="localvar">arg</a>));
  1313 :    <a href="../h_src/143290172.htm" class="localvar">nb</a> = <a href="../h_src/57449692.htm" class="macro">l_sprintf</a>(<a href="../h_src/143290308.htm" class="localvar">buff</a>, <a href="../h_src/143290444.htm" class="localvar">maxitem</a>, <a href="../h_src/143290580.htm" class="localvar">form</a>, (<a href="../h_src/57450916.htm" class="macro">LUAI_UACINT</a>)<a href="../h_src/143290036.htm" class="localvar">n</a>);
  1330 :    <a href="../h_src/143290172.htm" class="localvar">nb</a> = <a href="../h_src/57449692.htm" class="macro">l_sprintf</a>(<a href="../h_src/143290308.htm" class="localvar">buff</a>, <a href="../h_src/143290444.htm" class="localvar">maxitem</a>, <a href="../h_src/143290580.htm" class="localvar">form</a>, (<a href="../h_src/57451732.htm" class="macro">LUAI_UACNUMBER</a>)<a href="../h_src/143289900.htm" class="localvar">n</a>);
  1338 :    <a href="../h_src/143290580.htm" class="localvar">form</a>[<a href="../h_aa/57568976.htm" class="libfunc">strlen</a>(<a href="../h_src/143290580.htm" class="localvar">form</a>) - 1] = 's';  <a  class="comments">/* format it as a string */</a>
  1340 :    <a href="../h_src/143290172.htm" class="localvar">nb</a> = <a href="../h_src/57449692.htm" class="macro">l_sprintf</a>(<a href="../h_src/143290308.htm" class="localvar">buff</a>, <a href="../h_src/143290444.htm" class="localvar">maxitem</a>, <a href="../h_src/143290580.htm" class="localvar">form</a>, <a href="../h_src/143289764.htm" class="localvar">p</a>);
  1355 :    <a href="../h_src/57417256.htm" class="macro">luaL_argcheck</a>(<a href="../h_src/143291668.htm" class="localvar">L</a>, <a href="../h_src/143289628.htm" class="localvar">l</a> == <a href="../h_aa/57568976.htm" class="libfunc">strlen</a>(<a href="../h_src/143289492.htm" class="localvar">s</a>), <a href="../h_src/143291396.htm" class="localvar">arg</a>, &quot;string contains zeros&quot;);
  1355 :    <a href="../h_src/57417256.htm" class="macro">luaL_argcheck</a>(<a href="../h_src/143291668.htm" class="localvar">L</a>, <a href="../h_src/143289628.htm" class="localvar">l</a> == <a href="../h_aa/57568976.htm" class="libfunc">strlen</a>(<a href="../h_src/143289492.htm" class="localvar">s</a>), <a href="../h_src/143291396.htm" class="localvar">arg</a>, &quot;string contains zeros&quot;);
  1357 :    if (<a href="../h_aa/57565916.htm" class="libfunc">strchr</a>(<a href="../h_src/143290580.htm" class="localvar">form</a>, '.') == NULL &amp;&amp; <a href="../h_src/143289628.htm" class="localvar">l</a> &gt;= 100) {
  1362 :    <a href="../h_src/143290172.htm" class="localvar">nb</a> = <a href="../h_src/57449692.htm" class="macro">l_sprintf</a>(<a href="../h_src/143290308.htm" class="localvar">buff</a>, <a href="../h_src/143290444.htm" class="localvar">maxitem</a>, <a href="../h_src/143290580.htm" class="localvar">form</a>, <a href="../h_src/143289492.htm" class="localvar">s</a>);
  1468 :    if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>(<a href="../h_src/143285412.htm" class="localvar">sz</a> &gt; <a href="../h_src/143289084.htm" class="macro">MAXINTSIZE</a> || sz &lt;= 0))
  1511 :    if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>(*<a href="../h_src/143284460.htm" class="localvar">size</a> == -1))
  1554 :    if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>((<a href="../h_src/143282352.htm" class="localvar">align</a> &amp; (<a href="../h_src/143282352.htm" class="localvar">align</a> - 1)) != 0))  <a  class="comments">/* not a power of 2? */</a>
  1592 :    <a href="../h_aa/57902680.htm" class="libfunc">memcpy</a>(<a href="../h_src/143280992.htm" class="localvar">dest</a>, <a href="../h_src/143280856.htm" class="localvar">src</a>, <a href="../h_src/143280720.htm" class="localvar">size</a>);
  1622 :    <a href="../h_src/57417256.htm" class="macro">luaL_argcheck</a>(<a href="../h_src/143280312.htm" class="localvar">L</a>, -<a href="../h_src/143438928.htm" class="localvar">lim</a> &lt;= <a href="../h_src/143439064.htm" class="localvar">n</a> &amp;&amp; <a href="../h_src/143439064.htm" class="localvar">n</a> &lt; <a href="../h_src/143438928.htm" class="localvar">lim</a>, <a href="../h_src/143279768.htm" class="localvar">arg</a>, &quot;integer overflow&quot;);
  1662 :    <a href="../h_src/57417256.htm" class="macro">luaL_argcheck</a>(<a href="../h_src/143280312.htm" class="localvar">L</a>, <a href="../h_src/143437840.htm" class="localvar">len</a> &lt;= (<a href="../h_aa/57441192.htm" class="type">size_t</a>)<a href="../h_src/143279496.htm" class="localvar">size</a>, <a href="../h_src/143279768.htm" class="localvar">arg</a>,
  1672 :    <a href="../h_src/57417256.htm" class="macro">luaL_argcheck</a>(<a href="../h_src/143280312.htm" class="localvar">L</a>, <a href="../h_src/143279496.htm" class="localvar">size</a> &gt;= (int)sizeof(<a href="../h_aa/57441192.htm" class="type">size_t</a>) ||
  1673 :    <a href="../h_src/143437568.htm" class="localvar">len</a> &lt; ((<a href="../h_aa/57441192.htm" class="type">size_t</a>)1 &lt;&lt; (<a href="../h_src/143279496.htm" class="localvar">size</a> * <a href="../h_src/143288948.htm" class="macro">NB</a>)),
  1683 :    <a href="../h_src/57417256.htm" class="macro">luaL_argcheck</a>(<a href="../h_src/143280312.htm" class="localvar">L</a>, <a href="../h_aa/57568976.htm" class="libfunc">strlen</a>(<a href="../h_src/143437160.htm" class="localvar">s</a>) == <a href="../h_src/143437296.htm" class="localvar">len</a>, <a href="../h_src/143279768.htm" class="localvar">arg</a>, &quot;string contains zeros&quot;);
  1683 :    <a href="../h_src/57417256.htm" class="macro">luaL_argcheck</a>(<a href="../h_src/143280312.htm" class="localvar">L</a>, <a href="../h_aa/57568976.htm" class="libfunc">strlen</a>(<a href="../h_src/143437160.htm" class="localvar">s</a>) == <a href="../h_src/143437296.htm" class="localvar">len</a>, <a href="../h_src/143279768.htm" class="localvar">arg</a>, &quot;string contains zeros&quot;);
  1708 :    <a href="../h_src/57417256.htm" class="macro">luaL_argcheck</a>(<a href="../h_src/143436888.htm" class="localvar">L</a>, <a href="../h_src/143436072.htm" class="localvar">opt</a> != <a href="../h_src/143287384.htm" class="variable">Kstring</a> &amp;&amp; <a href="../h_src/143436072.htm" class="localvar">opt</a> != <a href="../h_src/143287316.htm" class="variable">Kzstr</a>, 1,
  1711 :    <a href="../h_src/57417256.htm" class="macro">luaL_argcheck</a>(<a href="../h_src/143436888.htm" class="localvar">L</a>, <a href="../h_src/143436480.htm" class="localvar">totalsize</a> &lt;= <a href="../h_src/143343280.htm" class="macro">MAXSIZE</a> - <a href="../h_src/143436344.htm" class="localvar">size</a>, 1,
  1746 :    if (<a href="../h_src/57551568.htm" class="macro">l_unlikely</a>((unsigned char)<a href="../h_src/143435664.htm" class="localvar">str</a>[<a href="../h_src/143435528.htm" class="localvar">islittle</a> ? <a href="../h_src/143434984.htm" class="localvar">i</a> : <a href="../h_src/143435392.htm" class="localvar">size</a> - 1 - <a href="../h_src/143434984.htm" class="localvar">i</a>] != <a href="../h_src/143434576.htm" class="localvar">mask</a>))
  1761 :    <a href="../h_src/57417256.htm" class="macro">luaL_argcheck</a>(<a href="../h_src/143434304.htm" class="localvar">L</a>, <a href="../h_src/143433624.htm" class="localvar">pos</a> &lt;= <a href="../h_src/143433896.htm" class="localvar">ld</a>, 3, &quot;initial position out of string&quot;);
  1766 :    <a href="../h_src/57417256.htm" class="macro">luaL_argcheck</a>(<a href="../h_src/143434304.htm" class="localvar">L</a>, (<a href="../h_aa/57441192.htm" class="type">size_t</a>)<a href="../h_src/143433216.htm" class="localvar">ntoalign</a> + <a href="../h_src/143433352.htm" class="localvar">size</a> &lt;= <a href="../h_src/143433896.htm" class="localvar">ld</a> - <a href="../h_src/143433624.htm" class="localvar">pos</a>, 2,
  1804 :    <a href="../h_src/57417256.htm" class="macro">luaL_argcheck</a>(<a href="../h_src/143434304.htm" class="localvar">L</a>, <a href="../h_src/143432400.htm" class="localvar">len</a> &lt;= <a href="../h_src/143433896.htm" class="localvar">ld</a> - <a href="../h_src/143433624.htm" class="localvar">pos</a> - <a href="../h_src/143433352.htm" class="localvar">size</a>, 2, &quot;data string too short&quot;);
  1810 :    <a href="../h_aa/57441192.htm" class="type">size_t</a> <a href="../h_src/143432264.htm" class="localvar">len</a> = <a href="../h_aa/57568976.htm" class="libfunc">strlen</a>(<a href="../h_src/143433760.htm" class="localvar">data</a> + <a href="../h_src/143433624.htm" class="localvar">pos</a>);
  1811 :    <a href="../h_src/57417256.htm" class="macro">luaL_argcheck</a>(<a href="../h_src/143434304.htm" class="localvar">L</a>, <a href="../h_src/143433624.htm" class="localvar">pos</a> + <a href="../h_src/143432264.htm" class="localvar">len</a> &lt; <a href="../h_src/143433896.htm" class="localvar">ld</a>, 2,
</pre>
<pre>
</pre>
<h5>Unused Local</h5>
<pre>
  1410 :    int <a href="../h_src/143288472.htm" class="variable">dummy</a>;
  1490 :    struct <a href="../h_src/143284324.htm" class="class">cD</a> { char <a href="../h_src/143284188.htm" class="variable">c</a>; <a href="../h_src/143284120.htm" class="class">u</a>nion { <a href="../h_src/57447108.htm" class="macro">LUAI_MAXALIGN</a>; } <a href="../h_src/143283984.htm" class="variable">u</a>; };
  1490 :    struct <a href="../h_src/143284324.htm" class="class">cD</a> { char <a href="../h_src/143284188.htm" class="variable">c</a>; <a href="../h_src/143284120.htm" class="class">u</a>nion { <a href="../h_src/57447108.htm" class="macro">LUAI_MAXALIGN</a>; } <a href="../h_src/143283984.htm" class="variable">u</a>; };
  1490 :    struct <a href="../h_src/143284324.htm" class="class">cD</a> { char <a href="../h_src/143284188.htm" class="variable">c</a>; <a href="../h_src/143284120.htm" class="class">u</a>nion { <a href="../h_src/57447108.htm" class="macro">LUAI_MAXALIGN</a>; } <a href="../h_src/143283984.htm" class="variable">u</a>; };
</pre>
<pre>

</pre>
</body>
</html>

